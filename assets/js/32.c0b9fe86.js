(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{388:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å¼•è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼•è¨€"}},[s._v("#")]),s._v(" å¼•è¨€")]),s._v(" "),t("p",[s._v("é€šè¿‡å¹¶å‘æ¥æ•£åˆ—ä¸²è¡Œä»»åŠ¡æå‡äº†æŒç»­æ•´ä½“ååé‡ï¼Œè€Œæœ¬æ–‡å°†ç»“åˆã€Šjavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ä¸€ä¹¦ä¸­çš„ä¸€äº›ä¼ ç»Ÿç†è®ºæ¥æ¢è®¨å¹¶å‘ç¼–ç¨‹ä¸­æ€§èƒ½çš„ä¸€äº›ä¼˜åŒ–çš„ä¸€äº›åŸºæœ¬ç†å¿µå’Œå¸¸è§æ‰‹æ®µï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚")]),s._v(" "),t("p",[s._v("ä½ å¥½ï¼Œæˆ‘æ˜¯ "),t("strong",[s._v("SharkChili")]),s._v(" ï¼Œç¦…ä¸è®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯å¸ƒé“è€…ï¼Œå¸Œæœ›æˆ‘çš„ç†å¿µå¯¹æ‚¨æœ‰æ‰€å¯å‘ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ğŸ“ æˆ‘çš„å…¬ä¼—å·ï¼šå†™ä»£ç çš„SharkChili")]),t("br"),s._v("\nåœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å¹²è´§ã€ç¼–ç¨‹æ€è€ƒä¸å¼€æºé¡¹ç›®å®è·µã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ğŸš€ æˆ‘çš„å¼€æºé¡¹ç›®ï¼šmini-redis")]),t("br"),s._v("\nä¸€ä¸ªç”¨äºæ•™å­¦ç†è§£çš„ Redis ç²¾ç®€å®ç°ï¼Œæ¬¢è¿ Star & Contributeï¼š"),t("br"),s._v(" "),t("a",{attrs:{href:"https://github.com/shark-ctrl/mini-redis",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/shark-ctrl/mini-redis"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("ğŸ‘¥ æ¬¢è¿åŠ å…¥è¯»è€…ç¾¤")]),t("br"),s._v("\nå…³æ³¨å…¬ä¼—å·ï¼Œå›å¤ "),t("strong",[s._v("ã€åŠ ç¾¤ã€‘")]),s._v(" å³å¯è·å–è”ç³»æ–¹å¼ï¼ŒæœŸå¾…ä¸ä½ äº¤æµæŠ€æœ¯ã€å…±åŒæˆé•¿ï¼")]),s._v(" "),t("h2",{attrs:{id:"å…³äºæ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…³äºæ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ"}},[s._v("#")]),s._v(" å…³äºæ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ")]),s._v(" "),t("h3",{attrs:{id:"æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§çš„å…³è”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§çš„å…³è”"}},[s._v("#")]),s._v(" æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§çš„å…³è”")]),s._v(" "),t("p",[s._v("å¯¹äºæ€§èƒ½çš„æå‡æˆ‘ä»¬æ›´å¤šæ˜¯éœ€è¦å»æŠ“ä½é—®é¢˜çš„æœ¬è´¨ï¼Œè€Œä¼˜åŒ–çš„æ ¹æœ¬ç›®çš„å°±æ˜¯åœ¨æœ‰é™çš„èµ„æºé™å®šä¸‹ï¼Œç”¨å°½å¯èƒ½å°‘çš„èµ„æºåšå°½å¯èƒ½å¤šçš„äº‹æƒ…ï¼Œè€Œè¿™é‡Œçš„èµ„æºé€šå¸¸çš„æŒ‡ä»£ä¸‹é¢è¿™äº›è®¡ç®—æœºèµ„æºï¼š")]),s._v(" "),t("ol",[t("li",[s._v("CPUæ—¶é’Ÿå‘¨æœŸ")]),s._v(" "),t("li",[s._v("ç½‘ç»œå¸¦å®½")]),s._v(" "),t("li",[s._v("IOå¸¦å®½")]),s._v(" "),t("li",[s._v("æ•°æ®åº“èµ„æº")]),s._v(" "),t("li",[s._v("è®¡ç®—æœºå†…å­˜")]),s._v(" "),t("li",[s._v("ç£ç›˜ç©ºé—´")]),s._v(" "),t("li",[s._v("......")])]),s._v(" "),t("p",[s._v("å½“ç¨‹åºååé‡å—åˆ°è¿™äº›èµ„æºçš„é™åˆ¶è€Œè¿›å…¥ç“¶é¢ˆæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ç§°è¿™äº›ä»»åŠ¡æ˜¯èµ„æºå¯†é›†å‹é˜»å¡ï¼Œä¾‹å¦‚ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("æŸä¸ªçº¿ç¨‹é•¿æ—¶é—´å¾—ä¸åˆ°CPUæ‰§è¡Œå°±æ˜¯CPUå¯†é›†å‹")]),s._v(" "),t("li",[s._v("æ–‡ä»¶è¯»å–æ“ä½œå› ä¸ºIO waitæ—¶é—´è¿‡é•¿å¯¼è‡´é˜»å¡ä¹Ÿå°±æ˜¯IOå¯†é›†å‹")])]),s._v(" "),t("p",[s._v("ç”±äºç°åœ¨javaå¼€å‘å¤§éƒ¨åˆ†éƒ½æ˜¯é¢å‘"),t("code",[s._v("restful")]),s._v("æ¥å£ç¼–ç¨‹ï¼Œå¯¹äºä»»åŠ¡çš„ç•Œå®šä¹Ÿä¸èƒ½å®Œå…¨æŒ‰ç…§ä¸Šè¿°çš„è¯´æ³•ä¸€æ¦‚è€Œè®ºï¼Œéœ€è¦ä»ç³»ç»Ÿç›‘æ§ç”šè‡³æ˜¯"),t("code",[s._v("java")]),s._v("ç›‘æ§è¯Šæ–­é¢æ¿è¿›è¡Œç»¼åˆåˆ†æï¼Œä¾‹å¦‚ç¬”è€…ä¸‹é¢è¿™æ®µä»£ç ç¤ºä¾‹ï¼Œè¿™é‡Œé‡‡ç”¨ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± æ¨¡æ‹Ÿå¹¶å‘çš„æ¥å£è¯·æ±‚ï¼Œæˆ‘ä»¬æ— æ³•æ˜ç¡®æ¨èè¿™ä¹ˆç»†ç²’åº¦çš„æ¥å£å®ç°ç»†èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å€Ÿä½ä¸€äº›ç›‘æ§è¯Šæ–­å·¥å…·è¿›è¡Œè¯Šæ–­ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ExecutorService")]),s._v(" threadPool "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Executors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("newFixedThreadPool")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runtime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRuntime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("availableProcessors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CountDownLatch")]),s._v(" latch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CountDownLatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            threadPool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doExecuteTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                latch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("countDown")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        latch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("await")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        threadPool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doExecuteTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ‰§è¡Œioä»»åŠ¡")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ioTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ‰§è¡Œè®¡ç®—ä»»åŠ¡")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("calculateTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("ä»¥ç¬”è€…ä¸ºä¾‹ï¼Œè¿™é‡Œç›´æ¥é€šè¿‡artahs attachåˆ°ç›®æ ‡è¿›è¡Œï¼Œé€šè¿‡traceæŒ‡ä»¤è¿½è¸ªå¼‚æ­¥ä»»åŠ¡doExecuteTaskçš„æ–¹æ³•æ ˆï¼Œå¯ä»¥çœ‹åˆ°å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„äºioä»»åŠ¡æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„æ¨æ–­å‡ºæ­¤ç±»ä»»åŠ¡å±äºIOå¯†é›†å‹çš„æ¥å£ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335879.png",alt:""}})]),s._v(" "),t("p",[s._v("æ‰€ä»¥åœ¨è¿›è¡Œæ€§èƒ½æ’æŸ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ›´å¤šè¦åšå°±æ˜¯é€šè¿‡è§‚å¯ŸæœåŠ¡å™¨ä¸Šå„é¡¹æŒ‡æ ‡æ˜ç¡®ä»»åŠ¡çš„ç±»å‹æ‰èƒ½è¿›è¡Œæ›´è¿‘ä¸€æ­¥çš„ä¼˜åŒ–ã€‚ä¸èƒ½æ„å‘³çš„å½“æ€§èƒ½ä¸‹é™çš„æ—¶å€™å°±å»ç›²ç›®çš„å¢åŠ çº¿ç¨‹æ•°ã€‚å› ä¸ºå¼•å…¥å¤šçº¿ç¨‹çš„åŒæ—¶ä¼šå¼•å…¥å¦‚ä¸‹å¼€é”€ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€")]),s._v(" "),t("li",[s._v("çº¿ç¨‹åˆ›å»ºä¸é”€æ¯")]),s._v(" "),t("li",[s._v("èµ„æºåŒæ­¥åè°ƒ")]),s._v(" "),t("li",[s._v("çº¿ç¨‹è°ƒåº¦")])]),s._v(" "),t("p",[s._v("æŒ‰ç…§å¹¶å‘ç¼–ç¨‹æ€§èƒ½çš„å“²å­¦ï¼Œè¦åšåˆ°æ€§èƒ½çš„ä¼˜åŒ–è¦æ±‚æˆ‘ä»¬å°½å¿«çš„åˆ©ç”¨åˆ°ç°æœ‰çš„èµ„æºï¼Œè®©å…¶æ—¶åˆ»ä¿æŒå¿™ç¢Œ(ä¾‹å¦‚CPUæ—¶é’Ÿå‘¨æœŸåšæœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯å¿™äºä¸Šä¸‹æ–‡åˆ‡æ¢)")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€æ‰¹å¹¶å‘ä»»åŠ¡ï¼Œè®¡ç®—æ—¶é—´å ç”¨50msï¼Œè€Œioè€—æ—¶ä¸º150æ¯«ç§’ï¼ŒæŒ‰ç…§ä¼˜åŒ–æ–¹æ³•è®ºï¼Œæˆ‘ä»¬åº”è¯¥è®¾å®šåˆé€‚çš„çº¿ç¨‹æ•°ä¿è¯æ¯ä¸ªçº¿ç¨‹å®Œæˆè¿ç®—åè¿›å…¥IOçŠ¶æ€å°±ç«‹åˆ»æŒ‚èµ·åˆ‡æ¢ä¸‹ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒCPUè¿ç®—ä»»åŠ¡ï¼Œä¿è¯å°½å¯èƒ½çš„å¹³è¡¡ç¨³å®šçš„è¿ç®—ä»»åŠ¡å¹¶æ¦¨å–CPUæ€§èƒ½ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335930.png",alt:"java-concurrency-optimization.drawio"}})]),s._v(" "),t("h3",{attrs:{id:"å¯ä¼¸ç¼©æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯ä¼¸ç¼©æ€§"}},[s._v("#")]),s._v(" å¯ä¼¸ç¼©æ€§")]),s._v(" "),t("p",[s._v("å¯ä¼¸ç¼©æ€§çš„æ¦‚å¿µï¼Œå³å¢åŠ è®¡ç®—æœºèµ„æºåï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œèƒ½åŠ›äº¦æˆ–è€…è¯´ååé‡ä¼šç›¸åº”çš„æé«˜ï¼Œè€Œè¿™äº›èµ„æºé€šå¸¸æŒ‡ä»£ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("è®¡ç®—æœºå†…å­˜")]),s._v(" "),t("li",[s._v("ç½‘ç»œå¸¦å®½")]),s._v(" "),t("li",[s._v("ç£ç›˜IOå¸¦å®½(ä¾‹å¦‚ç¡¬ç›˜å’ŒSSDç£ç›˜)")]),s._v(" "),t("li",[s._v("CPU")])]),s._v(" "),t("p",[s._v("åœ¨æ€§èƒ½ä¼˜åŒ–æ¶‰åŠå¤šå¿«å’Œå¤šå°‘æˆ‘ä»¬å¿…é¡»è¦ç†è§£ï¼Œè¿™æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œæœ‰æ—¶å€™è¿™ä¸¤è€…æ˜¯çŸ›ç›¾çš„ï¼Œå³ä¸ºäº†æå‡èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€ä¸ªä»»åŠ¡åˆ†ä¸ºæ— æ•°ä¸ªå­ä»»åŠ¡åœ¨å¤šæ ¸CPUä¸­å¤„ç†ï¼Œä½†æ˜¯æ€§èƒ½å´ä¸ä¸€å®šæå‡ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ®µç®€å•çš„è¿ç®—ä»£ç å•çº¿ç¨‹åªéœ€è¦è·‘2msï¼Œå¯¹åº”å¤šçº¿ç¨‹å¹¶å‘äº‰æŠ¢CPUæ—¶é—´ç‰‡ä¹‹åï¼Œè€—æ—¶å˜ä¸º88msï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" begin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sum:{} è€—æ—¶ï¼š{}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" begin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2ms")]),s._v("\n\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AtomicInteger")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AtomicInteger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        begin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IntStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("range")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parallel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("incrementAndGet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count:{} è€—æ—¶ï¼š{}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" begin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//88ms")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("äº¦æˆ–è€…æˆ‘ä»¬é€šè¿‡ç¨‹åºä¸Šçš„ä¼˜åŒ–æé«˜å•çº¿ç¨‹æ€§èƒ½çš„æ€§èƒ½è¡¨ç°ï¼Œå³è¯¥çº¿ç¨‹å·²ç»å°½å¯èƒ½çš„åˆ©ç”¨æ‰€æœ‰é™å®šä»¥å†…çš„èµ„æºåšåˆ°å°½å¯èƒ½çš„æé«˜ï¼Œè€Œè¿™å¾€å¾€ä¼šç ´åå¯ä¼¸ç¼©æ€§ï¼Œå³èµ„æºå¢åŠ äº†æ€§èƒ½ä¹Ÿä¸ä¼šæœ‰å¤šå°‘æå‡ã€‚ä¾‹å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨åº”ç”¨ä¸­å®ç°ä¸€ä¸ªæ‡’åŠ è½½ä¸”çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼Œä¸€èˆ¬äººå¯èƒ½ä¼šæƒ³åˆ°åˆ©ç”¨"),t("code",[s._v("synchronized")]),s._v("å®ç°ä¸€ä¸ª"),t("code",[s._v("DCL")]),s._v("åŒé‡é”æ ¡éªŒçš„å•ä¾‹æ¨¡å¼ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObj")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("volatile")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObj")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    object "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("å®é™…ä¸Šï¼Œåœ¨"),t("code",[s._v("JVM")]),s._v("ç±»åŠ è½½çš„ç‰¹æ€§ä¸‹ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åˆ©ç”¨"),t("code",[s._v("static")]),s._v("å’Œ"),t("code",[s._v("final")]),s._v("å…³é”®å­—ä¿è¯å®‰å…¨å‘å¸ƒçš„åŒæ—¶ï¼Œå®ç°åªæœ‰åœ¨çº¿ç¨‹è¿›è¡Œç±»åŠ è½½çš„æ—¶å€™å†å»åˆ›å»ºè¿™ä¸ªé™æ€å¯¹è±¡ï¼ŒåŒæ—¶åˆ©ç”¨"),t("code",[s._v("final")]),s._v("å…³é”®å­—ä¿è¯ä¸å¯å˜æ€§ä»è€Œåšåˆ°çº¿ç¨‹å®‰å…¨ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SafeSingleObj")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        object "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("å¯¹åº”çš„ç¬”è€…è¿™é‡Œä¹Ÿç»™å‡ºå‹æµ‹ä»£ç ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è¯•ä¸€ä¸‹ï¼Œåè€…ä»…ä»…æ˜¯åˆ©ç”¨å•çº¿ç¨‹æŠ€æœ¯ï¼Œå°½å¯èƒ½çš„è®©æ‰€æœ‰çº¿ç¨‹å°½å¯èƒ½è·‘æ»¡CPUè¿›ä¸€æ­¥çš„æå‡äº†å•ä¾‹æ¨¡å¼çš„è¡¨ç°ï¼Œè¿™å°±æ˜¯å…¸å‹å•çº¿ç¨‹å±‚é¢çš„ä¼˜åŒ–ï¼Œç ´åäº†å¯ä¼¸ç¼©æ€§çš„å…¸å‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" begin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IntStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("range")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parallel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" instance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObj")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RuntimeException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å•ä¾‹å¯¹è±¡ä¸ºç©º"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è€—æ—¶ï¼š{}ms"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" begin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n        begin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IntStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("range")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100_0000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parallel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" instance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SafeSingleObj")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RuntimeException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å•ä¾‹å¯¹è±¡ä¸ºç©º"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è€—æ—¶ï¼š{}ms"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" begin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("åŒç†æŒ‰ç…§ç°ä»£çš„åˆ†å¸ƒå¼æ¶æ„ï¼Œä¸€ä¸ªåŸæœ¬å•ä½“çš„åº”ç”¨ç¨‹åºå› ä¸ºåˆ†å±‚æˆ–è€…æŸäº›åŸå› åˆ†å¸ƒåˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œè™½ç„¶èµ„æºåˆ©ç”¨ç‡æå‡ï¼Œä½†æ˜¯æ€§èƒ½(ä¾‹å¦‚åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜)å´å¯èƒ½ä¼šä¸‹é™ï¼Œå› ä¸ºå®ƒä»¬ä¹‹é—´çš„è°ƒåº¦æ¶‰åŠäº†ç½‘ç»œé€šä¿¡ä»¥åŠåŒæ­¥ç­‰å¼€é”€ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ€§èƒ½æŒ‡æ ‡è¯„ä¼°æ ‡å‡†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½æŒ‡æ ‡è¯„ä¼°æ ‡å‡†"}},[s._v("#")]),s._v(" æ€§èƒ½æŒ‡æ ‡è¯„ä¼°æ ‡å‡†")]),s._v(" "),t("p",[s._v("æ€§èƒ½ä¼˜åŒ–çš„å†³ç­–å¤§éƒ¨åˆ†æ˜¯éœ€è¦ç†æ€§çš„åˆ†ææ€è€ƒï¼Œè¦ä»¥åŸºå‡†æµ‹è¯•ä¸ºä¸»ï¼Œä¸è¦ç›²ç›®çš„å»è¯„ä¼°ï¼Œå¿…é¡»æœ‰ä¸ªç»å¯¹çš„æ ‡å‡†æ‰èƒ½è¿›è¡Œè¯„ä¼°ï¼Œä¾‹å¦‚åœ¨å°è§„æ¨¡çš„æ•°æ®æ’åºä¸‹ï¼Œå†’æ³¡å°±æ˜¯ä¼˜äºå¿«é€Ÿæ’åºã€‚æ•´ä½“æ¥è¯´ï¼Œé’ˆå¯¹æ€§èƒ½è¯„ä¼°çš„æ ‡å‡†åº”è¯¥æ˜¯ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("æœ€å·®æ—¶é—´")]),s._v(" "),t("li",[s._v("å¹³å‡è€—æ—¶")]),s._v(" "),t("li",[s._v("å¯é¢„çŸ¥æ€§(å¤„ç†æ—¶é—´èŒƒå›´æ˜¯å¦æ³¢åŠ¨å¯æ§)")])]),s._v(" "),t("p",[s._v("æ€»çš„æ¥è¯´æ€§èƒ½ä¼˜åŒ–å¿…é¡»æ˜¯è¦æœ‰å…·ä½“æ ‡å‡†å’Œåœºæ™¯è¿›è¡Œåˆ†ææ‰èƒ½å†³ç­–ï¼Œå³ç¨‹åºä¸è¦è¿‡æ—©çš„ä¼˜åŒ–ï¼Œè€Œæ˜¯å…ˆæ­£ç¡®çš„è·‘èµ·æ¥ï¼Œç„¶ååœ¨å¿…è¦æ—¶å†å»æå‡å®ƒçš„é€Ÿåº¦ã€‚æ¯•ç«Ÿæ€§èƒ½ä¼˜åŒ–è¿™ä»¶äº‹è¿˜æœ‰é¢å¤–çš„ç»´æŠ¤è´Ÿæ‹…å’Œæµ‹è¯•å›å½’æˆæœ¬ï¼Œé€šè¿‡ä¼˜åŒ–æ¶æ„æˆ–è€…è®¾è®¡éƒ½ä¼šä½¿å¾—ç¨‹åºçš„å¤æ‚åº¦å¢åŠ ï¼Œä½¿å¾—æ•´ä½“å˜å¾—æ™¦æ¶©éš¾æ‡‚ã€‚")]),s._v(" "),t("h2",{attrs:{id:"amadhlå®šå¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amadhlå®šå¾‹"}},[s._v("#")]),s._v(" Amadhlå®šå¾‹")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯amadhl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯amadhl"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯Amadhl")]),s._v(" "),t("p",[s._v("æœ‰äº›é—®é¢˜ç¡®å®æ˜¯å¢åŠ æ›´å¤šçš„èµ„æºï¼Œæ‰§è¡Œçš„é€Ÿåº¦ç†è®ºä¸Šä¹Ÿå°±ä¼šè¶Šå¿«ï¼Œè¿™ä¹Ÿå°±æ˜¯è‘—åçš„"),t("code",[s._v("Amadhl")]),s._v("å®šå¾‹ï¼Œå…¶ç†è®ºçš„å¯¹åº”å…¬å¼å¦‚ä¸‹ï¼Œå¯¹åº”è¯­ä¹‰ä¸ºï¼š")]),s._v(" "),t("ol",[t("li",[s._v("Fæ˜¯ç¨‹åºçš„ä¸²è¡Œæ‰§è¡Œéƒ¨åˆ†")]),s._v(" "),t("li",[s._v("Næ˜¯å¤„ç†å™¨ä¸ªæ•°")])]),s._v(" "),t("p",[s._v("å¯¹åº”çš„å…¬å¼å¦‚ä¸‹ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335996.png",alt:"image-20250808004057139"}})]),s._v(" "),t("p",[s._v("åŸºäºè¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å‡è®¾å¦‚ä¸‹3ä¸ªåœºæ™¯æ¥å°è¯ä¸²è¡Œæ—¶é—´å¯¹äºåŠ é€Ÿæ¯”çš„é™åˆ¶ï¼š")]),s._v(" "),t("p",[s._v("å…ˆæ¥è¯´è¯´ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬çš„ä¸²è¡Œå ç”¨"),t("code",[s._v("50%")]),s._v("ï¼Œå‡è®¾æˆ‘ä»¬çš„å¤„ç†å™¨èµ„æºæ— é™å¤§ï¼Œä½¿å¾—å³è¾¹çš„åˆ†æ•°å‡ ä¹è¶‹è¿‘äº0ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªæ–¹æ³•ä¸²è¡Œæ—¶é—´ä¸å¹¶è¡Œæ—¶é—´äº”äº”å¼€çš„æƒ…å†µä¸‹ï¼ŒåŠ é€Ÿæ¯”æœ€å¤šåªæœ‰2ä¹Ÿå°±æ˜¯æœ€å¤šæå‡2å€ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335155.png",alt:""}})]),s._v(" "),t("p",[s._v("å¯èƒ½å¬ç€æœ‰ç‚¹æŠ½è±¡ï¼Œç¬”è€…ä¸¾ä¸ªå…·è±¡åŒ–çš„æƒ…å†µï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ª"),t("code",[s._v("CPU")]),s._v("ï¼Œå¯¹åº”2ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹å¹¶è¡Œæ—¶é—´å’Œä¸²è¡Œæ—¶é—´éƒ½"),t("code",[s._v("500ms")]),s._v("ä¹Ÿå°±æ˜¯ä¸Šæ–‡æ‰€è¯´çš„äº”äº”å¼€ï¼Œè¯•æƒ³å½“å‰çš„è®¡ç®—è¿‡ç¨‹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("çº¿ç¨‹0å…ˆæ‹¿åˆ°cpuå®Œæˆä¸²è¡Œå’Œå¹¶è¡Œ(å› ä¸ºå½“å‰åªæœ‰ä¸€ä¸ªcpuï¼Œåšä¸åˆ°å¹¶è¡Œ)")]),s._v(" "),t("li",[s._v("å…¶ä»–çº¿ç¨‹æŒ‰ç…§é¡ºåºå»å®Œæˆå„è‡ªçš„ä»»åŠ¡")]),s._v(" "),t("li",[s._v("çº¿ç¨‹1åŒç†ä¸²è¡Œæ‰§è¡Œ")]),s._v(" "),t("li",[s._v("2ä¸ªçº¿ç¨‹ä¸²è¡Œæ‰§è¡Œ500msï¼ŒåŠ ä¸Šå¹¶è¡Œå…±ç”¨500msä¹Ÿå°±æ˜¯1500ms")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335309.png",alt:""}})]),s._v(" "),t("p",[s._v("æ­¤æ—¶æˆ‘ä»¬åœ¨å¢åŠ ä¸€ä¸ªå¤„ç†å™¨ï¼Œå˜ä¸ºä¸¤ä¸ªå¤„ç†å™¨ï¼Œå¯¹åº”çš„è®¡ç®—è¿‡ç¨‹ä¸ºï¼š")]),s._v(" "),t("ol",[t("li",[s._v("çº¿ç¨‹0å’Œçº¿ç¨‹1åŒæ—¶æ‰§è¡Œå¹¶è¡Œéƒ¨åˆ†ï¼Œæ€»å…±è€—æ—¶"),t("code",[s._v("500ms")])]),s._v(" "),t("li",[s._v("çº¿ç¨‹0å…ˆåˆ©ç”¨å¤„ç†å™¨0æ‰§è¡Œä¸²è¡Œéƒ¨åˆ†è€—æ—¶"),t("code",[s._v("500ms")])]),s._v(" "),t("li",[s._v("çº¿ç¨‹1åˆ©ç”¨å¤„ç†å™¨1æ‰§è¡Œä¸²è¡Œéƒ¨åˆ†ï¼Œè€—æ—¶"),t("code",[s._v("500ms")])]),s._v(" "),t("li",[s._v("ä¸¤ä¸ªçº¿ç¨‹ä¸²è¡Œä»»åŠ¡å„å ç”¨ä¸€ä¸ªå¤„ç†å™¨å®Œæˆ500msçš„ä»»åŠ¡ï¼ŒåŠ ä¸Šå¹¶è¡Œè€—æ—¶500msï¼Œæœ€ç»ˆå˜ä¸º1000ms")]),s._v(" "),t("li",[s._v("åŠ é€Ÿæ¯”ä¸º1500/1000å¤§çº¦æ˜¯1.5ï¼Œæ— çº¿è¶‹è¿‘äº2")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335476.png",alt:""}})]),s._v(" "),t("p",[s._v("äº†è§£é˜¿å§†è¾¾å°”å®šå¾‹çš„ç†å¿µä¹‹åï¼Œæˆ‘ä»¬å†æ¥ä¸€ä¸ªåœºæ™¯ï¼Œå‡è®¾å¤„ç†å™¨ä¸º10ï¼Œä¸²è¡Œå ç”¨æ—¶é—´ä¸º10%ï¼Œå¯¹åº”çš„åŠ é€Ÿæ¯”å·®ä¸å¤šæ˜¯5%å·¦å³ï¼Œå¯¹åº”çš„è®¡ç®—å…¬å¼ä¸ºï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("åŠ é€Ÿæ¯” "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/0.19\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("æå‡è‡³100ä¸ªå¤„ç†å™¨æœ€é«˜ä½¿ç”¨ç‡ä¹Ÿåªèƒ½è¾¾åˆ°9%çš„ä½¿ç”¨ç‡å·¦å³ï¼Œè¯•æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œåœ¨æ‰€æœ‰ç¡¬ä»¶èµ„æºæ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¸²è¡Œè€—æ—¶ä»£ç æ®µä¼˜åŒ–ä¸º5%ï¼Œå¯¹åº”çš„åŠ é€Ÿæ¯”åˆ™æ˜¯æ— çº¿è¶‹è¿‘äº10ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("åŠ é€Ÿæ¯” "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v("+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-0.05"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ç”±æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥æ™“ï¼Œæ€§èƒ½ç“¶é¢ˆé™¤äº†è®¡ç®—èµ„æºä»¥å¤–ï¼Œè¿˜æœ‰ä¸²è¡Œæ—¶é—´çš„è€—æ—¶ï¼Œå¦‚æœèƒ½å¤Ÿå°½å¯èƒ½å¾—å»ç¼©å°ä¸²è¡Œéƒ¨åˆ†è€—æ—¶ï¼Œç¨‹åºçš„æ€§èƒ½è¡¨ç°ä¹Ÿä¼šæœ‰æ‰€æå‡ï¼Œå°±ä¾‹å¦‚ä¸‹é¢è¿™æ®µé˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œçš„ä»£ç æ®µï¼Œå®ƒçš„ä¸²è¡Œæ—¶é—´çš„ç“¶é¢ˆï¼Œå°±åœ¨äºå¤šçº¿ç¨‹å¹¶å‘çš„è®¿é—®å®¹å™¨çš„åŒæ­¥é˜»å¡çš„å¼€é”€ï¼Œæ­¤ç±»é—®é¢˜çš„ä¼˜åŒ–å·¥ä½œï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ›´å¤šçš„å»è¿™ç§åŒæ­¥ã€åŠ é”ç­‰æ–¹å¼çš„é˜»å¡ä»£ç æ®µï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WorkThread")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BlockingQueue")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WorkThread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BlockingQueue")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("queue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n   \n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SneakyThrows")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¤šçº¿ç¨‹å¹¶å‘è®¿é—®é˜»å¡é˜Ÿåˆ—ï¼Œè¿™å—å°±æ˜¯ä¸²è¡Œéƒ¨åˆ†çš„æ€§èƒ½ç“¶é¢ˆ")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" task "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" queue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("take")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            task"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"amadhlå®šå¾‹å¯¹äºå¹¶å‘ä¼˜åŒ–çš„å“²å­¦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amadhlå®šå¾‹å¯¹äºå¹¶å‘ä¼˜åŒ–çš„å“²å­¦"}},[s._v("#")]),s._v(" Amadhlå®šå¾‹å¯¹äºå¹¶å‘ä¼˜åŒ–çš„å“²å­¦")]),s._v(" "),t("p",[s._v("åŸºäºAmadhlå®šå¾‹çš„æ€æƒ³ï¼Œæœ¬è´¨ä¸Šä¼˜åŒ–å¹¶å‘ç®—æ³•æ—¶ï¼Œåœ¨èµ„æºé™å®šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´å¤šå»å»å¼ºè°ƒé™ä½ä¸²è¡Œæ—¶é—´ï¼Œè¯´çš„æ›´å…·ä½“ä¸€ç‚¹å°±æ˜¯é™ä½javaå†…ç½®é”çš„ç²’åº¦ï¼š")]),s._v(" "),t("p",[s._v("ç¬¬ä¸€ç§æ–¹å¼ä¸ºé”åˆ†è§£ï¼Œå°†ä¸€ä¸ªé”åˆ†ä¸ºä¸¤ä¸ªé”ï¼Œé’ˆå¯¹èŒè´£å·¥ä½œè¿›è¡Œåˆ†ç¦»ï¼Œé’ˆå¯¹ä¸åŒçš„é”é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œä¾‹å¦‚è¯»å†™é”ï¼Œé’ˆå¯¹è¯»è¯·æ±‚ä¸ä¿®æ”¹çš„åœºæ™¯ï¼Œè¿™ç§æ–¹å¼èƒ½å¤Ÿæœ€å¤§åŒ–å¤šçº¿ç¨‹è¯»å–ä¸´ç•Œèµ„æºçš„æ•ˆç‡ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335718.png",alt:"java-concurrency-optimization-2.drawio"}})]),s._v(" "),t("p",[s._v("å¦ä¸€ç§åˆ™æ˜¯é”åˆ†æ®µï¼Œå°†ä¸€ä¸ªé”åˆ†è§£ä¸ºå¤šä¸ªé”æ®µï¼Œå°†å¤šçº¿ç¨‹ç›¸åŒæ“ä½œçš„ç«äº‰é”çš„åœºæ™¯ï¼Œè®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šç®—æ³•å»è·å–ä¸åŒçš„é”ï¼Œåˆ†æ•£ç«äº‰çš„å‹åŠ›ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335796.png",alt:"java-concurrency-optimization-3.drawio"}})]),s._v(" "),t("p",[s._v("è¿™ä¹Ÿæ˜¯ç›®å‰å¹¶å‘ç¼–ç¨‹é”ä¼˜åŒ–æœ€å¸¸è§çš„å‡ ç§ä¼˜åŒ–ç­–ç•¥ï¼Œè¯»è€…å¯ä»¥äº†è§£ä¸€ä¸‹è¿™ä¸€å—çš„æ€æƒ³ï¼Œç¬”è€…ä¼šåœ¨åæ–‡ä¸­ç»™å‡ºè¯¦å°½çš„è§£æã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¤šçº¿ç¨‹çš„ç“¶é¢ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¤šçº¿ç¨‹çš„ç“¶é¢ˆ"}},[s._v("#")]),s._v(" å¤šçº¿ç¨‹çš„ç“¶é¢ˆ")]),s._v(" "),t("h3",{attrs:{id:"ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[s._v("#")]),s._v(" ä¸Šä¸‹æ–‡åˆ‡æ¢")]),s._v(" "),t("p",[s._v("å…ˆæ¥è¯´è¯´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä»æ“ä½œç³»ç»Ÿæ¥è¯´çº¿ç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼ŒCPUæ˜¯éœ€è¦ä¿å­˜çº¿ç¨‹ä¸Šæ–‡ä¿¡æ¯å°†å…¶å­˜å…¥å¯„å­˜å™¨ç„¶åæ‰èƒ½æŒ‚èµ·çš„ï¼Œè¿™ä½¿å¾—çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å°±å­˜åœ¨å¦‚ä¸‹å‡ ä¸ªå¼€é”€ç‚¹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ŒCPUæ—¶é’Ÿå‘¨æœŸéƒ½ç”¨äºåˆ‡æ¢ï¼Œè€Œçº¿ç¨‹è¿ç®—ä»»åŠ¡")]),s._v(" "),t("li",[s._v("é¢‘ç¹åˆ‡æ¢å¯¼è‡´CPUç¼“å­˜å¤±æ•ˆå¯¼è‡´å±€éƒ¨æ€§åŸç†çš„ä¼˜åŠ¿ä¸¢å¤±ï¼Œå¯¼è‡´æ‰§è¡Œæ•ˆç‡é™ä½")])]),s._v(" "),t("p",[s._v("ä»¥Unixç³»ç»Ÿä¸ºä¾‹ï¼Œä¸€èˆ¬æ¥è¯´çº¿ç¨‹ä¸Šä¸‹æ–‡çš„å¼€é€šè¿‡vmstatæŒ‡ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚æœæŠ¥å‘Šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§äº10%å°±è¡¨ç¤ºè°ƒåº¦æ´»åŠ¨é¢‘ç¹äº†ã€‚")]),s._v(" "),t("p",[s._v("ä»¥ç¬”è€…çš„ç³»ç»Ÿä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°csä¸º1ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å°±ä¸ç®—å¤§ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("procs -----------memory---------- ---swap-- -----io---- -system-- -------cpu-------\n r  b   swpd   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("   buff  cache   si   so    bi    bo   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("   cs us sy "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" wa st gu\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6914216")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19216")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("425612")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3371")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"å†…å­˜åŒæ­¥è¯­ä¹‰çš„å±å®³"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜åŒæ­¥è¯­ä¹‰çš„å±å®³"}},[s._v("#")]),s._v(" å†…å­˜åŒæ­¥è¯­ä¹‰çš„å±å®³")]),s._v(" "),t("p",[s._v("ä¸ºäº†ä¿è¯å¹¶å‘å¯è§æ€§ï¼ŒJVMè¦æ±‚æŒ‡ä»¤æŒ‡ä»¤ä¸ä¼šé‡æ’åºï¼Œå®ƒä¼šåœ¨JITç¼–è¯‘å™¨ç”šè‡³CPUå¤„ç†å™¨ä¸Šæ’å…¥å†…å­˜å±éšœè§£å†³é—®é¢˜ï¼Œè¿™ä½¿å¾—å¾ˆå¤šJITä¼˜åŒ–éƒ½å¤±æ•ˆã€‚å°½ç®¡JVMä¹Ÿé’ˆå¯¹ä¸åˆç†çš„å¹¶å‘é‡‡ç”¨äº†ä¸€äº›æ‰‹æ®µè¿›è¡Œè¾…åŠ©ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯é€ƒé€¸åˆ†æç­‰ï¼Œä½†æˆ‘ä»¬å»ºè®®ä¸æ¶‰åŠåŒæ­¥çš„ä»£ç é€»è¾‘å°½å¯èƒ½çš„å»é¿å…ä½¿ç”¨ä¸€äº›å¹¶å‘å…³é”®å­—æˆ–è€…å¹¶å‘å·¥å…·ã€‚")]),s._v(" "),t("h3",{attrs:{id:"åŒæ­¥é˜»å¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŒæ­¥é˜»å¡"}},[s._v("#")]),s._v(" åŒæ­¥é˜»å¡")]),s._v(" "),t("p",[s._v("é’ˆå¯¹åŒæ­¥å—é˜»å¡æˆ‘ä»¬å¯ä»¥ç»“åˆåœºæ™¯é€‰ç”¨è‡ªæ—‹é”æˆ–è€…é˜»å¡æŒ‚èµ·çº¿ç¨‹é”ï¼Œå¯¹åº”çš„åº”ç”¨åœºæ™¯è¦æ±‚ä¹Ÿå¾ˆç®€å•ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å¦‚æœä¸Šé”å¤„ç†å¾ˆå¿«ä¸”ç­‰å¾…æ—¶é—´å¾ˆçŸ­ï¼Œç”¨è‡ªæ—‹ç­‰å¾…é”åŸåœ°è‡ªé€‰ä¸€ä¼šï¼Œå¸¸è§çš„å·¥å…·ä¹Ÿå°±æ˜¯jucåŒ…ä¸‹çš„åŸå­ç±»ï¼Œä¾‹å¦‚AtomicInteger")]),s._v(" "),t("li",[s._v("å¦‚æœå¹¶å‘ç«äº‰æ¿€çƒˆï¼Œè‡ªæ—‹é”å¯¼è‡´CPUæ—¶é—´ç‰‡å› ä¸ºå„ç§éå¿…è¦çš„è‡ªæ—‹ç­‰å¾…è¿ç®—è€Œæµªè´¹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿæ›´æ¨èç›´æ¥ä½¿ç”¨javaå†…ç½®ç›‘è§†é”ï¼Œä¹Ÿå°±æ˜¯synchronizedå…³é”®å­—")])]),s._v(" "),t("p",[s._v("å½“ç„¶è¿™ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›æ¯”è¾ƒæ„Ÿæ€§çš„è¯´æ³•ï¼ŒæŒ‰ç…§jdk8çš„ä¼˜åŒ–ï¼Œsynchronizedå…³é”®å­—å·²ç»æœ‰äº†é”å‡çº§çš„æ¦‚å¿µï¼Œå®ƒä¼šæ ¹æ®å½“å‰çº¿ç¨‹çš„ç«äº‰æ¿€çƒˆç¨‹åº¦ä¾æ¬¡è‡ªåŠ¨çš„å®Œæˆå¦‚ä¸‹çš„é”å‡çº§ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("æ— é”")]),s._v(" "),t("li",[s._v("åå‘é”")]),s._v(" "),t("li",[s._v("è½»é‡çº§é”ä¹Ÿå°±æ˜¯è‡ªæ—‹é”")]),s._v(" "),t("li",[s._v("é‡é‡çº§é”ä¹Ÿå°±æ˜¯æ¶‰åŠå†…æ ¸æ€è°ƒç”¨çš„æ“ä½œç³»ç»Ÿçº§åˆ«çš„mutexé”")])]),s._v(" "),t("p",[s._v("å…³äºé€ƒé€¸åˆ†æå’Œsynchronizedé”å‡çº§çš„æ¦‚å¿µï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥ç§»æ­¥ç¬”è€…è¿™ä¸¤ç¯‡æ–‡ç« ï¼š")]),s._v(" "),t("p",[s._v("é€ƒé€¸åˆ†æåœ¨Javaä¸­çš„åº”ç”¨ä¸ä¼˜åŒ–:"),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/0flB6Hlqox5jrVoR6JQkkA",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com/s/0flB6Hlqox5jrVoR6JQkkA"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("æ·±å…¥è§£æJavaä¸­çš„synchronized å…³é”®å­—:"),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/rMvpMSrfUsLeQ_WGObeQ4w",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com/s/rMvpMSrfUsLeQ_WGObeQ4w"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"å‡å°‘é”ç«äº‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‡å°‘é”ç«äº‰"}},[s._v("#")]),s._v(" å‡å°‘é”ç«äº‰")]),s._v(" "),t("h3",{attrs:{id:"å…³äºé”çš„ä¸€äº›ä¼˜åŒ–è®º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…³äºé”çš„ä¸€äº›ä¼˜åŒ–è®º"}},[s._v("#")]),s._v(" å…³äºé”çš„ä¸€äº›ä¼˜åŒ–è®º")]),s._v(" "),t("p",[s._v("åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé”çš„åŒæ­¥æ˜¯è€—æ—¶çš„é‡è¦ä¼˜åŒ–ç‚¹ï¼Œå¯¹äºå¯ä¼¸ç¼©æ€§è€Œè¨€æœ€ä¸»è¦çš„å¨èƒæœ¬è´¨ä¸Šå°±æ˜¯ç‹¬å é”çš„èµ„æºé”ï¼Œè€Œåˆ¤æ–­å¹¶å‘ç«äº‰æ¿€çƒˆçš„ç¨‹åº¦çš„æ¡ä»¶æœ‰ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ç‹¬å é”çš„è¯·æ±‚é¢‘ç‡")]),s._v(" "),t("li",[s._v("æ¯æ¬¡æŒæœ‰é”çš„æ—¶é—´")])]),s._v(" "),t("p",[s._v("å¦‚æœäºŒè€…çš„ä¹˜ç§¯å¾ˆå°ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºçš„å¹¶å‘ç«äº‰å°±ç›¸å¯¹æ¿€çƒˆï¼Œåä¹‹äº¦ç„¶ã€‚æŒ‰ç…§å¹¶å‘å“²å­¦æ¥è¯´ï¼Œé’ˆå¯¹é”çš„ä¼˜åŒ–æœ‰ä¸‰ç§æ–¹å¼ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å‡å°æŒæœ‰é”çš„æ—¶é—´(å‡å°é”çš„èŒƒå›´)")]),s._v(" "),t("li",[s._v("é™ä½é”çš„è¯·æ±‚é¢‘ç‡(å‡å°é”çš„ç®¡æ§ç²’åº¦)")]),s._v(" "),t("li",[s._v("é‡‡ç”¨å¸¦æœ‰åè°ƒæ€§è´¨çš„ç‹¬å é”ï¼Œæå‡ç¨‹åºçš„å¹¶å‘åº¦")])]),s._v(" "),t("h3",{attrs:{id:"ç¼©å°é”çš„èŒƒå›´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼©å°é”çš„èŒƒå›´"}},[s._v("#")]),s._v(" ç¼©å°é”çš„èŒƒå›´")]),s._v(" "),t("p",[s._v("è¿™é‡Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„ä¼˜åŒ–ç‚¹ï¼Œåœ¨å¹¶å‘ç¨‹åºä¸­çš„ä¼˜åŒ–ï¼Œé”çš„èŒƒå›´ä¹Ÿæ˜¯å½±å“ç¨‹åºæ€§èƒ½çš„è¡¨ç°çš„é‡è¦æŒ‡æ ‡ï¼Œå‡è®¾åŒæ­¥ä»£ç å—è€—æ—¶ä¸º2mså¹¶ä¸”æ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦è¿™æŠŠé”ï¼Œé‚£ä¹ˆæ— è®ºæœ‰å¤šå°‘ä¸ªå¤„ç†å™¨ï¼Œååé‡ä¹Ÿä¸ä¼šè¶…è¿‡500ä¸ªæ“ä½œæ¯ç§’ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‚å½“ç¼©å°é”çš„èŒƒå›´é™ä½åŒæ­¥ä»£ç å—çš„è€—æ—¶ï¼Œä»¥æå‡ç¨‹åºçš„å¹¶å‘å˜ç°ã€‚")]),s._v(" "),t("p",[s._v("ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œä¸ºäº†æ“ä½œå…±äº«èµ„æºçš„mapï¼Œé”ä½äº†æ•´ä¸ªæ–¹æ³•ï¼Œè¿™å…¶ä¸­è¿˜åŒ…å«ä¸€æ®µä¼‘çœ çš„IOé€»è¾‘ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" map "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getVal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("å¯¹æ­¤æˆ‘ä»¬ä¹Ÿç»™å‡ºä¸€ä¸ª10ä¸ªå¹¶å‘çš„å‹æµ‹é€»è¾‘,æœ€ç»ˆçš„è€—æ—¶å·®ä¸å¤šåœ¨10så·¦å³ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ExecutorService")]),s._v(" threadPool "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Executors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("newFixedThreadPool")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CountDownLatch")]),s._v(" countDownLatch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CountDownLatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" begin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            threadPool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getVal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                countDownLatch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("countDown")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        countDownLatch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("await")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ€»è€—æ—¶:{}ms"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" begin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼©å°"),t("code",[s._v("synchronized")]),s._v(" çš„èŒƒå›´ç¼©å°åŒæ­¥èŒƒå›´æ¥å‡å°‘æŒæœ‰é”æ—¶éœ€è¦å¤„ç†çš„æŒ‡ä»¤æ•°é‡ä»¥é™ä½åŒæ­¥ä»£ç å—çš„è€—æ—¶ï¼Œè®©CPUå•ä½æ—¶é—´å†…å¯ä»¥å¤„ç†å°½å¯èƒ½å¤šçš„çº¿ç¨‹ä»¥æå‡ç¨‹åºçš„å¹¶å‘åº¦ã€‚")]),s._v(" "),t("p",[s._v("äºæ˜¯æˆ‘ä»¬å°†ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œå°†éå¿…è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ“ä½œæ”¾åœ¨é”ä¹‹å¤–ï¼Œç»è¿‡å‹æµ‹è€—æ—¶åŸºæœ¬ç¨³å®šåœ¨1så·¦å³ï¼Œæå‡éå¸¸æ˜æ˜¾ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" map "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getVal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("å½“ç„¶è¿™æ ·çš„åšæ³•æˆ‘ä»¬è¿˜æ˜¯éœ€è¦è€ƒè™‘åˆ°åŸå­æ€§ï¼Œä¾‹å¦‚å¹¶å‘æ“ä½œçš„æ›´æ–°ï¼Œæ­¤æ—¶å¯èƒ½ç¼©å°é”çš„èŒƒå›´å°±å¯èƒ½å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜ã€‚")]),s._v(" "),t("h3",{attrs:{id:"é™ä½é”çš„è¯·æ±‚é¢‘ç‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™ä½é”çš„è¯·æ±‚é¢‘ç‡"}},[s._v("#")]),s._v(" é™ä½é”çš„è¯·æ±‚é¢‘ç‡")]),s._v(" "),t("p",[s._v("å¦ä¸€ç§å‡å°é”æŒæœ‰æ—¶é—´çš„æ–¹å¼æ˜¯ï¼Œç¼©å°é”çš„è¯·æ±‚é¢‘ç‡ï¼Œå¦‚æœä¸€ä¸ªé”éœ€è¦ä¿æŠ¤å¤šä¸ªç‹¬ç«‹çŠ¶æ€çš„åŒæ­¥ï¼Œè¿™å°±å¯¼è‡´è®¸å¤šéå¿…è¦çš„åŒæ­¥é˜»å¡ï¼Œå°±åƒä¸‹é¢è¿™æ®µä»£ç ï¼Œè·å–userå’Œè·å–shopçš„å¹¶å‘æ“ä½œéƒ½é‡‡ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹é”ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´è·å–useræœŸé—´shopçš„æ“åšè¢«é˜»å¡ï¼Œç¨‹åºçš„ååé‡ä¸‹é™ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getShop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("æ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†é”åˆ†è§£ï¼Œå°†ä¸åŒèµ„æºäº¤ç”±ä¸åŒçš„é”ç®¡æ§ï¼Œå°†é”çš„è¯·æ±‚é¢‘ç‡åˆ†è§£åˆ°ä¸åŒçš„é”è¿›è¡Œç®¡æ§ï¼Œä»è€Œæå‡ç¨‹åºçš„å¹¶å‘æ€§èƒ½è¡¨ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userLock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("     \n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"getUser"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getShop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("shopLock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"getShop"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"é”åˆ†æ®µçš„å“²å­¦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é”åˆ†æ®µçš„å“²å­¦"}},[s._v("#")]),s._v(" é”åˆ†æ®µçš„å“²å­¦")]),s._v(" "),t("p",[s._v("æŠŠç«äº‰æ¿€çƒˆçš„é”åˆ†è§£ä¸ºä¸¤ä¸ªé”ï¼Œè¿™ä¸¤ä¸ªé”è¿˜æ˜¯å­˜åœ¨æ¿€çƒˆçš„ç«äº‰ï¼Œè™½ç„¶é‡‡ç”¨ä¸¤ä¸ªçº¿ç¨‹æå‡çš„ä¸€éƒ¨åˆ†çš„å¯ä¼¸ç¼©æ€§ï¼Œä½†æ˜¯åœ¨å¤šæ ¸å¤„ç†å™¨ä¸­ï¼Œä»ç„¶æ— æ³•åšåˆ°èµ„æºçš„æœ€å¤§åŒ–åˆ©ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å‚è€ƒ"),t("code",[s._v("ConcurrentHashMap")]),s._v("çš„æ€æƒ³ï¼Œå°†é”åˆ†è§£è®¡æ•°æ‹“å±•ä¸ºé€šè¿‡ä¸€ç»„ç‹¬ç«‹å¯¹è±¡è¿›è¡Œç»Ÿä¸€ç®¡æ§ï¼Œè¿™ä¹Ÿå°±æ˜¯è‘—åçš„é”åˆ†æ®µæŠ€æœ¯ï¼Œé€šè¿‡4ä¸ªé”çš„æ•°ç»„ï¼Œåœ¨æ•£åˆ—ç®—æ³•å’Œæ•°æ®åˆ†å¸ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼Œç«äº‰çš„æ¿€çƒˆç¨‹åº¦å°†ä¼šå‹ç¼©è‡³åŸæ¥çš„1/4:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" buckets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" mask "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" buckets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" table "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("buckets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" locks "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("buckets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆå§‹åŒ–åˆ†æ®µé”")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * é“¾è¡¨çš„nodeèŠ‚ç‚¹\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),s._v(" next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å–æ¨¡è¿ç®—è·å¾—ç´¢å¼•çš„ä½ç½®")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" idx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hashCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¸Šåˆ†æ®µé”")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"çº¿ç¨‹è·å–åˆ†æ®µé”ï¼š{}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" idx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hashCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¸Šé”è¯»å–æ•°æ®")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è‹¥ä¸ºç©ºåˆ™ç›´æ¥åˆå§‹åŒ–èŠ‚ç‚¹")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),s._v(" pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    pre "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    pre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("next "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n   \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br")])]),t("p",[s._v("å¾ˆå¤šè¯»è€…åé¦ˆå¯¹äºå¹¶å‘ç¼–ç¨‹çš„ç¨‹åºæµ‹è¯•æ— ä»ä¸‹æ‰‹ï¼ŒåŸºäºæ­¤é—®é¢˜ï¼Œç¬”è€…ç´¢æ€§å°†aiå…³é—­ä»¥æ²‰æµ¸å¼çš„æ–¹å¼å®Œæˆç¼–ç å¹¶ç»™å‡ºæµ‹è¯•å•å…ƒçš„ç”¨ä¾‹ï¼Œæ€»ä½“æ¥è¯´å¹¶å‘ç¼–ç¨‹æµ‹è¯•çš„æ–¹å¼ä¸»è¦æ˜¯æŠ“ä½å¤šçº¿ç¨‹æ“ä½œåä¸€äº›å¯ä»¥éªŒè¯çŠ¶æ€çš„çš„å­—æ®µåœ¨ç¨‹åºç»“æŸåè¿›è¡Œæ ¡éªŒï¼Œä¾‹å¦‚æˆ‘ä»¬ç°åœ¨æƒ³éªŒè¯ç›¸åŒçš„keyæ˜¯å¦ä¼šå®Œæˆè¦†ç›–ï¼Œé‚£ä¹ˆå¯¹åº”åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­çš„ç»“æœå°±æ˜¯sizeä¸å˜å€¼è¢«è¦†ç›–")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" syncMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¡åˆ°åº•å±‚çš„bucket0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" t0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¡åˆ°åº•å±‚çš„bucket0æ¨¡æ‹Ÿå†²çª")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" t1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        t0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åŸºäºæœ€ç»ˆçŠ¶æ€è¿›è¡Œæ ¡éªŒ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Assert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Assert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("ç„¶åå°±æ˜¯æµ‹è¯•å¤šä¸ªbucketä¸‹æ˜¯å¦å¯ä»¥å®Œæˆæ‹‰é“¾æ³•ï¼Œä¾‹å¦‚keyä¸º0å’Œ4éƒ½ä¼šè½åˆ°bucket-0ä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æœ€ç»ˆæ ¡éªŒå°±æ˜¯åˆ¤æ–­è¿™ä¸¤ä¸ªé”®å€¼å¯¹æ˜¯å¦éƒ½å¯ä»¥æŸ¥å‡ºæ¥ï¼Œç„¶åæŸ¥çœ‹bucket-0è¿™ä¸ªæ¡¶ä¸‹çš„é“¾è¡¨sizeæ˜¯å¦ä¸º2å³å¯,è¿™é‡Œç¬”è€…å°±ç®€å•çš„åšä¸ªå€¼æŸ¥è¯¢ï¼Œå…³äºbucketæ¡¶çš„æ ¡éªŒåœ¨æ–­ç‚¹ä¸Šåšä¸ªç¡®è®¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" syncMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SyncMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¡åˆ°åº•å±‚çš„bucket0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" t0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¡åˆ°åº•å±‚çš„bucket0æ¨¡æ‹Ÿå†²çª")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" t1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        t0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åŸºäºæœ€ç»ˆçŠ¶æ€è¿›è¡Œæ ¡éªŒ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Assert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Assert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" syncMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("é’ˆå¯¹å…¶ä»–ç±»å‹çš„æµ‹è¯•ä¹Ÿæ˜¯å·®ä¸å¤šæ„æ€ï¼Œè¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„ç”¨ä¾‹åœºæ™¯è‡ªè¡Œè¦†ç›–ã€‚")]),s._v(" "),t("h3",{attrs:{id:"é¿å…çƒ­ç‚¹åŸŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¿å…çƒ­ç‚¹åŸŸ"}},[s._v("#")]),s._v(" é¿å…çƒ­ç‚¹åŸŸ")]),s._v(" "),t("p",[s._v("å¦ä¸€ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼“å­˜æŠ€æœ¯å°†çƒ­ç‚¹æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå½“ç„¶è¿™äº›çƒ­ç‚¹åŸŸå¯èƒ½ä¹Ÿä¼šé™åˆ¶å¯ä¼¸ç¼©æ€§ã€‚ä¾‹å¦‚HashMapè¿›è¡Œä¿®æ”¹æ“ä½œæ—¶ä¼šä½¿ç”¨ç»´æŠ¤ä¸€ä»½sizeå˜é‡ï¼Œä¿è¯å®¹é‡å’Œåˆ¤ç©ºæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‹é™ä¸ºO(1),ä½†æ˜¯åœ¨å¹¶å‘æ“ä½œä¸‹ï¼Œå› ä¸ºéœ€è¦åŒæ­¥çš„åŸå› ï¼ŒåŒæ­¥çš„ç­‰å¾…è€—æ—¶åˆä¼šå¯¼è‡´å¯ä¼¸ç¼©é—®é¢˜(å³å¢åŠ ç¡¬ä»¶èµ„æºä¹‹åï¼Œç¨‹åºçš„ååé‡ä¸å‡åå¢)ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335917.png",alt:"java-concurrency-optimization-4.drawio"}})]),s._v(" "),t("p",[s._v("å¯¹æ­¤ConcurrentHashMapåˆ™æ˜¯é‡‡ç”¨åˆ†æ®µè¿›è¡ŒæŠ€æœ¯æšä¸¾éå†ä¸åŒåˆ†æ®µä¸­çš„å®¹å™¨æ•°è¿›è¡Œç´¯åŠ ï¼Œæ¥æå‡å¹¶å‘è®¡æ•°ç»´æŠ¤çš„æ•ˆç‡ï¼Œå¦‚ä¸‹å›¾ï¼Œä»å®è§‚è§’åº¦æ¥è¯´ï¼ŒConcurrentHashMapè¿›è¡Œsizeç´¯åŠ æ—¶é»˜è®¤ä¼šå…ˆé€šè¿‡CASçš„æ–¹å¼è¿›è¡Œç´¯åŠ ï¼Œä¸€æ—¦å¤±è´¥å°±å›å°è¯•ç´¯åŠ åˆ°counterCellsä¸­ï¼ŒåŒæ—¶è€ƒè™‘åˆ°é”®å€¼å¯¹çš„å¢åŠ counterCellsç«äº‰ä¹Ÿä¼šå˜å˜å¾—æ¿€çƒˆï¼Œè¯¥æ•°ç»„ä¹Ÿä¼šæ ¹æ®æ¿€çƒˆæƒ…å†µè¿›è¡ŒåŠ¨æ€æ‰©å®¹ï¼Œè¿™ç§ç†å¿µä¹Ÿå­˜åœ¨äºjkd8çš„è®¡æ•°å·¥å…·LongAddrã€‚")]),s._v(" "),t("p",[s._v("ç„¶ååœ¨è¿›è¡Œsizeè®¡ç®—æ—¶å°±ä¼šè®²baseCountå’ŒcounterCellsæ•°ç»„éå†ç´¯åŠ ï¼Œå¾—åˆ°sizeçš„å€¼ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qiniuyun.sharkchili.com/202512281335063.png",alt:"java-concurrency-optimization-5.drawio"}})]),s._v(" "),t("p",[s._v("åŸºäºä¸Šè¿°çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä¹Ÿç»™å‡ºConcurrentHashMapçš„sizeçš„æºç å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å°†æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ å’ŒbaseCountè¿›è¡Œç´¯åŠ ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sumCount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAX_VALUE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAX_VALUE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sumCount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CounterCell")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" counterCells"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CounterCell")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ‹¿åˆ°baseCOunt")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" baseCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éå†æ•°ç»„å…ƒç´ ç´¯åŠ åˆ°sum")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("as "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" as"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" as"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿”å›sizeçš„å€¼")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"è¯»å†™åˆ†ç¦»çš„æ€æƒ³"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯»å†™åˆ†ç¦»çš„æ€æƒ³"}},[s._v("#")]),s._v(" è¯»å†™åˆ†ç¦»çš„æ€æƒ³")]),s._v(" "),t("p",[s._v("å°†è¯»å†™æŒ‰ç…§ä¸åŒç»´åº¦å»ä¼˜åŒ–ï¼Œæå‡è¯»å¤šå†™å°‘åœºæ™¯ä¸‹çš„è¯»å¹¶å‘æ“ä½œå¯åŒæ­¥æ‰§è¡Œï¼Œå†™æ“ä½œè¿›è¡Œé€‚å½“äº’æ–¥æå‡ç¨‹åºçš„å¹¶å‘æ€§èƒ½è¡¨ç°ã€‚å¯¹äºè¯»å†™é”ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥é˜…è¯»ä¸€ä¸‹ç¬”è€…è¿™ç¯‡æ–‡ç« ï¼š")]),s._v(" "),t("p",[s._v("javaå¹¶å‘ç¼–ç¨‹æ§åˆ¶å·¥å…·å°ç»“:"),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/jk6tobOgvQAD87ugc4zoRw",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com/s/jk6tobOgvQAD87ugc4zoRw"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"åŸå­æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸå­æ“ä½œ"}},[s._v("#")]),s._v(" åŸå­æ“ä½œ")]),s._v(" "),t("p",[s._v("å¯¹äºç®€å•çš„å¹¶å‘ä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨åŸå­ç±»è¿™äº›åŸºäºåº•å±‚ç¡¬ä»¶åŸå­äº¤æ¢æŒ‡ä»¤ç›´æ¥å®Œæˆè¿™ç§ç»†ç²’åº¦çš„åŸå­äº¤æ¢ä¿®æ”¹ï¼Œé™ä½å¹¶å‘æ“ä½œçš„æ—¶é—´æ¥æå‡å¯ä¼¸ç¼©æ€§ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¹¶å‘ç¨‹åºç›‘æ§è°ƒä¼˜æ’æŸ¥æ€è·¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘ç¨‹åºç›‘æ§è°ƒä¼˜æ’æŸ¥æ€è·¯"}},[s._v("#")]),s._v(" å¹¶å‘ç¨‹åºç›‘æ§è°ƒä¼˜æ’æŸ¥æ€è·¯")]),s._v(" "),t("h3",{attrs:{id:"åŒæ­¥æ€§èƒ½çš„æ’æŸ¥æ€è·¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŒæ­¥æ€§èƒ½çš„æ’æŸ¥æ€è·¯"}},[s._v("#")]),s._v(" åŒæ­¥æ€§èƒ½çš„æ’æŸ¥æ€è·¯")]),s._v(" "),t("p",[s._v("æµ‹è¯•ç¨‹åºçš„å¯ä¼¸ç¼©æ€§æˆ‘ä»¬å¯ä»¥åˆ†é…ä¸€äº›æœ‰æ•ˆçš„å·¥å…·è¿›è¡Œæ’æŸ¥ï¼Œä¾‹å¦‚unixä¸Šçš„vmstatæŒ‡ä»¤ï¼Œå½“ç„¶è¿™ä¸€åˆ‡çš„å‰ææ˜¯cpuæ ¸å¿ƒéƒ½è¢«å……åˆ†çš„åˆ©ç”¨ï¼Œå¦‚æœcpuæ¶ˆè€—å‘å¸ƒä¸å‡åŒ€å°±è¯´æ˜ä¸€ç»„çº¿ç¨‹äº¤ç”±ä¸€å°éƒ¨åˆ†çš„å¤„ç†å™¨è¿›è¡Œå¤„ç†ï¼Œå½“å‰ç¨‹åºå‹æµ‹ç»“æœå­˜åœ¨ä»¥åæ¦‚å…¨ä¸è¶³å¤Ÿæƒå¨ï¼Œåˆç†çš„æ’æŸ¥æ€è·¯ä¸ºï¼š")]),s._v(" "),t("ol",[t("li",[s._v("æŸ¥çœ‹è´Ÿè½½ï¼Œè´Ÿè½½æ˜¯å¯ä»¥æ˜ç¡®æ’æŸ¥å½“å‰æœåŠ¡å™¨è´Ÿæ‹…çš„é‡è¦æŒ‡æ ‡ï¼Œå¦‚æœè¿™ä¸ªå€¼ä½äº"),t("code",[s._v("æ ¸å¿ƒæ•°*0.7")]),s._v("ï¼Œé‚£ä¹ˆè¯´æ˜å‹æµ‹çš„æ ·æœ¬ä¸å¤Ÿå¤šï¼Œéœ€è¦è¡¥å……æ•°æ®é›†ã€‚")]),s._v(" "),t("li",[s._v("IOå¯†é›†å‹ï¼šé€šè¿‡iostatæŸ¥çœ‹å½“å‰æ€§èƒ½æ˜¯å¦å¤§é‡æ—¶é—´å¤„äºIOçŠ¶æ€ï¼Œå¦‚æœæ˜¯åˆ™æœåŠ¡å™¨ç½‘ç»œå¸¦å®½ä¸å¤Ÿéœ€è¦æå‡å¸¦å®½å’Œç½‘ç»œIOæ€§èƒ½ä»¥ä¿è¯IOæ“ä½œå¿«é€Ÿç»“æŸï¼Œå°½å¯èƒ½è®©CPUå¿«é€Ÿå¤„ç†å°½å¯èƒ½å¤šçš„çº¿ç¨‹ä»»åŠ¡ã€‚")]),s._v(" "),t("li",[s._v("å¤–éƒ¨é™åˆ¶ï¼šæŸ¥çœ‹æ•°æ®åº“ç­‰æœåŠ¡å™¨æ€§èƒ½è´Ÿè½½æƒ…å†µä»¥åˆ¤æ–­å¤–éƒ¨æ˜¯å¦å­˜åœ¨ç“¶é¢ˆã€‚")]),s._v(" "),t("li",[s._v("jstackæŸ¥çœ‹ç­‰å¾…çš„çº¿ç¨‹å’Œé”ç«äº‰æ¿€çƒˆç¨‹åº¦ã€‚")]),s._v(" "),t("li",[s._v("16æ ¸å¤„ç†å™¨ä¸Šåªæœ‰4ä¸ªçº¿ç¨‹ï¼Œæ²¡æœ‰å……åˆ†åˆ©ç”¨CPUå¤„ç†å™¨ï¼Œæœªèƒ½åŠæ—¶åˆ©ç”¨èµ„æºæå‡ç¨‹åºçš„å¹¶å‘åº¦ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"å°½å¯èƒ½ä¸ç”¨å¯¹è±¡æ± "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å°½å¯èƒ½ä¸ç”¨å¯¹è±¡æ± "}},[s._v("#")]),s._v(" å°½å¯èƒ½ä¸ç”¨å¯¹è±¡æ± ")]),s._v(" "),t("p",[s._v("è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¼ ç»Ÿçš„æ¦‚å¿µäº†ï¼Œè¿™é‡Œç¬”è€…ä¹Ÿè›®æ‰©å±•è¯´æ˜ä¸€ä¸‹ï¼Œç°ä»£"),t("code",[s._v("java")]),s._v("å¯¹è±¡åˆ†é…æŠ€æœ¯ä»¥ä¼˜åŒ–åˆ°æ¯”Cè¯­è¨€"),t("code",[s._v("malloc")]),s._v("è°ƒç”¨æ›´å¿«äº†ï¼Œåœ¨"),t("code",[s._v("hotspot1.4.x")]),s._v("å’Œ"),t("code",[s._v("5.0")]),s._v("ä¸­ï¼Œå·®ä¸å¤š10æ¡æŒ‡ä»¤å°±å¯ä»¥å®Œæˆä¸€ä¸ªå¯¹è±¡åˆ†é…ï¼Œè€Œä¸”å¯¹è±¡åˆ†é…åŸºæœ¬åœ¨çº¿ç¨‹æœ¬åœ°å†…å­˜å—å®Œæˆ("),t("code",[s._v("TLAB")]),s._v("æŠ€æœ¯)ï¼Œç”šè‡³åœ¨ç°ä»£JITä¼˜åŒ–æœ‰æ—¶å€™å¯¹è±¡çš„åˆ†é…ç›´æ¥åœ¨æ ˆä¸Šå®Œæˆåˆ†é…ï¼Œæ ¹æœ¬æ²¡æœ‰ä»»ä½•åŒæ­¥çš„åè°ƒï¼Œè€Œå¯¹è±¡æ± å­˜åœ¨åŒæ­¥åè°ƒåˆ†é…å¯¹è±¡çš„é˜»å¡å¼€é”€ï¼Œç›¸æ¯”äºå‰è€…ä¸ä»…å†…å­˜å­˜åœ¨ä¸€å®šçš„å ç”¨ï¼ŒåŒæ—¶é˜»å¡å¼€é”€å¾ˆå¯èƒ½æ˜¯å†…å­˜åˆ†é…æ“ä½œçš„æ•°ç™¾å€ï¼Œå¾—ä¸å¿å¤±ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å°ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[s._v("#")]),s._v(" å°ç»“")]),s._v(" "),t("p",[s._v("æœ¬æ–‡ç»“åˆä¼ ç»Ÿçš„ä¼˜åŒ–æ–¹æ³•è®ºä»¥åŠä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µç¤ºä¾‹è¯¦ç»†çš„ä»‹ç»äº†å¹¶å‘ç¼–ç¨‹ä¸­çš„ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ³•å’Œæ‰‹æ®µï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚")]),s._v(" "),t("p",[s._v("ä½ å¥½ï¼Œæˆ‘æ˜¯ "),t("strong",[s._v("SharkChili")]),s._v(" ï¼Œç¦…ä¸è®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯å¸ƒé“è€…ï¼Œå¸Œæœ›æˆ‘çš„ç†å¿µå¯¹æ‚¨æœ‰æ‰€å¯å‘ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ğŸ“ æˆ‘çš„å…¬ä¼—å·ï¼šå†™ä»£ç çš„SharkChili")]),t("br"),s._v("\nåœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å¹²è´§ã€ç¼–ç¨‹æ€è€ƒä¸å¼€æºé¡¹ç›®å®è·µã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ğŸš€ æˆ‘çš„å¼€æºé¡¹ç›®ï¼šmini-redis")]),t("br"),s._v("\nä¸€ä¸ªç”¨äºæ•™å­¦ç†è§£çš„ Redis ç²¾ç®€å®ç°ï¼Œæ¬¢è¿ Star & Contributeï¼š"),t("br"),s._v(" "),t("a",{attrs:{href:"https://github.com/shark-ctrl/mini-redis",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/shark-ctrl/mini-redis"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("ğŸ‘¥ æ¬¢è¿åŠ å…¥è¯»è€…ç¾¤")]),t("br"),s._v("\nå…³æ³¨å…¬ä¼—å·ï¼Œå›å¤ "),t("strong",[s._v("ã€åŠ ç¾¤ã€‘")]),s._v(" å³å¯è·å–è”ç³»æ–¹å¼ï¼ŒæœŸå¾…ä¸ä½ äº¤æµæŠ€æœ¯ã€å…±åŒæˆé•¿ï¼")]),s._v(" "),t("h2",{attrs:{id:"å‚è€ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[s._v("#")]),s._v(" å‚è€ƒ")]),s._v(" "),t("p",[s._v("ã€Šjavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹")])])}),[],!1,null,null,null);t.default=e.exports}}]);