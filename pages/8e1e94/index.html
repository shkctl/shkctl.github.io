<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简明的Arthas配置及基础运维教程 | The Complete Backend Engineer</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-6948347885301434" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="禅与计算机程序设计的艺术">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.fd8a955e.css" as="style"><link rel="preload" href="/assets/js/app.e893bc68.js" as="script"><link rel="preload" href="/assets/js/2.0f2864c1.js" as="script"><link rel="preload" href="/assets/js/37.080c4136.js" as="script"><link rel="prefetch" href="/assets/js/10.44e0ca78.js"><link rel="prefetch" href="/assets/js/100.0ed371f6.js"><link rel="prefetch" href="/assets/js/101.7f722fd7.js"><link rel="prefetch" href="/assets/js/102.30c89284.js"><link rel="prefetch" href="/assets/js/103.3ed92c68.js"><link rel="prefetch" href="/assets/js/104.90df8f47.js"><link rel="prefetch" href="/assets/js/105.68247c1d.js"><link rel="prefetch" href="/assets/js/106.7c9f10c1.js"><link rel="prefetch" href="/assets/js/107.a515064a.js"><link rel="prefetch" href="/assets/js/108.80b5fa66.js"><link rel="prefetch" href="/assets/js/109.02b1ee2e.js"><link rel="prefetch" href="/assets/js/11.c76d3e56.js"><link rel="prefetch" href="/assets/js/110.1dccb364.js"><link rel="prefetch" href="/assets/js/111.464698db.js"><link rel="prefetch" href="/assets/js/112.857e923f.js"><link rel="prefetch" href="/assets/js/113.68e5c6a3.js"><link rel="prefetch" href="/assets/js/114.f6ffbf1a.js"><link rel="prefetch" href="/assets/js/115.e217114c.js"><link rel="prefetch" href="/assets/js/116.b65b8e0b.js"><link rel="prefetch" href="/assets/js/117.f6f15ef6.js"><link rel="prefetch" href="/assets/js/118.21180219.js"><link rel="prefetch" href="/assets/js/119.0a50382f.js"><link rel="prefetch" href="/assets/js/12.116d6a17.js"><link rel="prefetch" href="/assets/js/120.c76f2e28.js"><link rel="prefetch" href="/assets/js/121.c77bd4d8.js"><link rel="prefetch" href="/assets/js/122.753a4628.js"><link rel="prefetch" href="/assets/js/123.7d9268b9.js"><link rel="prefetch" href="/assets/js/124.23413b75.js"><link rel="prefetch" href="/assets/js/125.8d808d11.js"><link rel="prefetch" href="/assets/js/126.5c328cd4.js"><link rel="prefetch" href="/assets/js/127.be8eb4c7.js"><link rel="prefetch" href="/assets/js/128.14eaf4c6.js"><link rel="prefetch" href="/assets/js/129.037cada8.js"><link rel="prefetch" href="/assets/js/13.86ee0ee4.js"><link rel="prefetch" href="/assets/js/130.3f4b81a3.js"><link rel="prefetch" href="/assets/js/131.0a8a91be.js"><link rel="prefetch" href="/assets/js/132.d5865515.js"><link rel="prefetch" href="/assets/js/133.334e4ec7.js"><link rel="prefetch" href="/assets/js/134.074fbb0c.js"><link rel="prefetch" href="/assets/js/135.4c1d75b4.js"><link rel="prefetch" href="/assets/js/136.3e122b41.js"><link rel="prefetch" href="/assets/js/137.fe10b09a.js"><link rel="prefetch" href="/assets/js/138.54b4b2ef.js"><link rel="prefetch" href="/assets/js/139.3883fff5.js"><link rel="prefetch" href="/assets/js/14.e34688a7.js"><link rel="prefetch" href="/assets/js/140.078eff15.js"><link rel="prefetch" href="/assets/js/141.949d876b.js"><link rel="prefetch" href="/assets/js/142.54e6ed21.js"><link rel="prefetch" href="/assets/js/143.ff73dde5.js"><link rel="prefetch" href="/assets/js/144.cf979a70.js"><link rel="prefetch" href="/assets/js/145.b217db72.js"><link rel="prefetch" href="/assets/js/146.c9872ef2.js"><link rel="prefetch" href="/assets/js/147.32147c50.js"><link rel="prefetch" href="/assets/js/148.411a0638.js"><link rel="prefetch" href="/assets/js/149.ed899419.js"><link rel="prefetch" href="/assets/js/15.03c300fc.js"><link rel="prefetch" href="/assets/js/150.4c278e80.js"><link rel="prefetch" href="/assets/js/151.73bd004f.js"><link rel="prefetch" href="/assets/js/152.5716ffe7.js"><link rel="prefetch" href="/assets/js/153.33575577.js"><link rel="prefetch" href="/assets/js/154.6e0c3807.js"><link rel="prefetch" href="/assets/js/155.79acad7a.js"><link rel="prefetch" href="/assets/js/156.1ca46e9e.js"><link rel="prefetch" href="/assets/js/157.b8e1cb13.js"><link rel="prefetch" href="/assets/js/158.047ce40d.js"><link rel="prefetch" href="/assets/js/159.564cb107.js"><link rel="prefetch" href="/assets/js/16.76d8d610.js"><link rel="prefetch" href="/assets/js/160.0b4be4c9.js"><link rel="prefetch" href="/assets/js/161.2d0b6a29.js"><link rel="prefetch" href="/assets/js/162.7b7cddf9.js"><link rel="prefetch" href="/assets/js/163.9c1d2ab4.js"><link rel="prefetch" href="/assets/js/164.9a7309b6.js"><link rel="prefetch" href="/assets/js/165.11d81960.js"><link rel="prefetch" href="/assets/js/166.266c02dd.js"><link rel="prefetch" href="/assets/js/167.6d4d9953.js"><link rel="prefetch" href="/assets/js/168.aa4ee3b8.js"><link rel="prefetch" href="/assets/js/169.0d3373fb.js"><link rel="prefetch" href="/assets/js/17.453cb3dd.js"><link rel="prefetch" href="/assets/js/170.ce20f019.js"><link rel="prefetch" href="/assets/js/171.b4f20fc0.js"><link rel="prefetch" href="/assets/js/172.75742b66.js"><link rel="prefetch" href="/assets/js/173.8daa037e.js"><link rel="prefetch" href="/assets/js/174.5243dead.js"><link rel="prefetch" href="/assets/js/175.9a313498.js"><link rel="prefetch" href="/assets/js/176.4c2b81b0.js"><link rel="prefetch" href="/assets/js/177.dad18ef5.js"><link rel="prefetch" href="/assets/js/178.f3fa8d3b.js"><link rel="prefetch" href="/assets/js/179.589b3e1b.js"><link rel="prefetch" href="/assets/js/18.4de1c5f4.js"><link rel="prefetch" href="/assets/js/180.ea36098d.js"><link rel="prefetch" href="/assets/js/181.92cdb1c7.js"><link rel="prefetch" href="/assets/js/182.c0b21f1f.js"><link rel="prefetch" href="/assets/js/183.a0eb2e49.js"><link rel="prefetch" href="/assets/js/184.b5aa56e6.js"><link rel="prefetch" href="/assets/js/185.81cb4cac.js"><link rel="prefetch" href="/assets/js/186.53b06c41.js"><link rel="prefetch" href="/assets/js/187.dfae4e44.js"><link rel="prefetch" href="/assets/js/188.b0cb81de.js"><link rel="prefetch" href="/assets/js/189.3678f44d.js"><link rel="prefetch" href="/assets/js/19.3e76d54a.js"><link rel="prefetch" href="/assets/js/190.83946875.js"><link rel="prefetch" href="/assets/js/191.3ff7b14d.js"><link rel="prefetch" href="/assets/js/192.701461bb.js"><link rel="prefetch" href="/assets/js/193.559260cc.js"><link rel="prefetch" href="/assets/js/194.be81abc2.js"><link rel="prefetch" href="/assets/js/195.9b8d270a.js"><link rel="prefetch" href="/assets/js/196.bec3303f.js"><link rel="prefetch" href="/assets/js/197.63dafd74.js"><link rel="prefetch" href="/assets/js/198.605f2efc.js"><link rel="prefetch" href="/assets/js/199.edfd56ac.js"><link rel="prefetch" href="/assets/js/20.6e6b3fc4.js"><link rel="prefetch" href="/assets/js/200.3e48ab94.js"><link rel="prefetch" href="/assets/js/201.233d8a2d.js"><link rel="prefetch" href="/assets/js/202.91a5ef9c.js"><link rel="prefetch" href="/assets/js/203.bc0fabe9.js"><link rel="prefetch" href="/assets/js/204.8bc8880b.js"><link rel="prefetch" href="/assets/js/205.0f5a3300.js"><link rel="prefetch" href="/assets/js/206.b3505d50.js"><link rel="prefetch" href="/assets/js/207.a394ee4c.js"><link rel="prefetch" href="/assets/js/208.837b0596.js"><link rel="prefetch" href="/assets/js/209.e9d3bceb.js"><link rel="prefetch" href="/assets/js/21.69f77bb4.js"><link rel="prefetch" href="/assets/js/210.edb571f9.js"><link rel="prefetch" href="/assets/js/211.fc30ee35.js"><link rel="prefetch" href="/assets/js/212.0c76fd95.js"><link rel="prefetch" href="/assets/js/213.4c91febb.js"><link rel="prefetch" href="/assets/js/214.0a2395e5.js"><link rel="prefetch" href="/assets/js/215.d4637411.js"><link rel="prefetch" href="/assets/js/216.c1454bb1.js"><link rel="prefetch" href="/assets/js/217.0c0e6f55.js"><link rel="prefetch" href="/assets/js/218.1451ab92.js"><link rel="prefetch" href="/assets/js/219.0f96b0c8.js"><link rel="prefetch" href="/assets/js/22.201d31e2.js"><link rel="prefetch" href="/assets/js/220.8f6313e8.js"><link rel="prefetch" href="/assets/js/221.11a00bef.js"><link rel="prefetch" href="/assets/js/222.8649b716.js"><link rel="prefetch" href="/assets/js/223.d8939fd6.js"><link rel="prefetch" href="/assets/js/224.f7a5a821.js"><link rel="prefetch" href="/assets/js/225.0c642b7c.js"><link rel="prefetch" href="/assets/js/226.5860464c.js"><link rel="prefetch" href="/assets/js/227.079d5421.js"><link rel="prefetch" href="/assets/js/228.d433e6e5.js"><link rel="prefetch" href="/assets/js/229.5068c386.js"><link rel="prefetch" href="/assets/js/23.10bf4243.js"><link rel="prefetch" href="/assets/js/230.20571aa5.js"><link rel="prefetch" href="/assets/js/231.a2977032.js"><link rel="prefetch" href="/assets/js/232.2c809bc8.js"><link rel="prefetch" href="/assets/js/233.443b82b0.js"><link rel="prefetch" href="/assets/js/234.800cdff1.js"><link rel="prefetch" href="/assets/js/235.fb8d4938.js"><link rel="prefetch" href="/assets/js/236.36863586.js"><link rel="prefetch" href="/assets/js/237.ad86391f.js"><link rel="prefetch" href="/assets/js/238.be050d3f.js"><link rel="prefetch" href="/assets/js/239.12a16a50.js"><link rel="prefetch" href="/assets/js/24.824afdae.js"><link rel="prefetch" href="/assets/js/25.35475e70.js"><link rel="prefetch" href="/assets/js/26.e02e9bae.js"><link rel="prefetch" href="/assets/js/27.271f5ef4.js"><link rel="prefetch" href="/assets/js/28.a3385896.js"><link rel="prefetch" href="/assets/js/29.b0f185f2.js"><link rel="prefetch" href="/assets/js/3.a5b363ab.js"><link rel="prefetch" href="/assets/js/30.e3ccdef2.js"><link rel="prefetch" href="/assets/js/31.f96d307d.js"><link rel="prefetch" href="/assets/js/32.c0b9fe86.js"><link rel="prefetch" href="/assets/js/33.200a99d3.js"><link rel="prefetch" href="/assets/js/34.2b031524.js"><link rel="prefetch" href="/assets/js/35.9cf4ce52.js"><link rel="prefetch" href="/assets/js/36.1d78bdc4.js"><link rel="prefetch" href="/assets/js/38.a96300bf.js"><link rel="prefetch" href="/assets/js/39.fcf7d628.js"><link rel="prefetch" href="/assets/js/4.373178a6.js"><link rel="prefetch" href="/assets/js/40.6eebc32d.js"><link rel="prefetch" href="/assets/js/41.3ad4146c.js"><link rel="prefetch" href="/assets/js/42.c1beb08d.js"><link rel="prefetch" href="/assets/js/43.76cd763e.js"><link rel="prefetch" href="/assets/js/44.6b1fdcd3.js"><link rel="prefetch" href="/assets/js/45.51579c3c.js"><link rel="prefetch" href="/assets/js/46.52741878.js"><link rel="prefetch" href="/assets/js/47.cd93b2de.js"><link rel="prefetch" href="/assets/js/48.773c188b.js"><link rel="prefetch" href="/assets/js/49.44412d53.js"><link rel="prefetch" href="/assets/js/5.6a44f71a.js"><link rel="prefetch" href="/assets/js/50.b4bbbbea.js"><link rel="prefetch" href="/assets/js/51.e8ef0c3a.js"><link rel="prefetch" href="/assets/js/52.4a55bbf5.js"><link rel="prefetch" href="/assets/js/53.c1087a52.js"><link rel="prefetch" href="/assets/js/54.c8e13749.js"><link rel="prefetch" href="/assets/js/55.cc84db26.js"><link rel="prefetch" href="/assets/js/56.f454b553.js"><link rel="prefetch" href="/assets/js/57.918eb2e9.js"><link rel="prefetch" href="/assets/js/58.d1a59570.js"><link rel="prefetch" href="/assets/js/59.044ec60b.js"><link rel="prefetch" href="/assets/js/6.6a62d9f9.js"><link rel="prefetch" href="/assets/js/60.81e16e70.js"><link rel="prefetch" href="/assets/js/61.ed5542f5.js"><link rel="prefetch" href="/assets/js/62.72b114ed.js"><link rel="prefetch" href="/assets/js/63.3e421524.js"><link rel="prefetch" href="/assets/js/64.1e3fb052.js"><link rel="prefetch" href="/assets/js/65.e1ed1c12.js"><link rel="prefetch" href="/assets/js/66.07753887.js"><link rel="prefetch" href="/assets/js/67.36f77f4b.js"><link rel="prefetch" href="/assets/js/68.5ddddae3.js"><link rel="prefetch" href="/assets/js/69.31b6a988.js"><link rel="prefetch" href="/assets/js/7.2f58813b.js"><link rel="prefetch" href="/assets/js/70.a04b238e.js"><link rel="prefetch" href="/assets/js/71.5ccef793.js"><link rel="prefetch" href="/assets/js/72.b1127849.js"><link rel="prefetch" href="/assets/js/73.7749f2a0.js"><link rel="prefetch" href="/assets/js/74.2fe0cec9.js"><link rel="prefetch" href="/assets/js/75.962eca85.js"><link rel="prefetch" href="/assets/js/76.ea97d2ca.js"><link rel="prefetch" href="/assets/js/77.182bb4ac.js"><link rel="prefetch" href="/assets/js/78.b9d2abaa.js"><link rel="prefetch" href="/assets/js/79.d6901320.js"><link rel="prefetch" href="/assets/js/8.779d1361.js"><link rel="prefetch" href="/assets/js/80.13663490.js"><link rel="prefetch" href="/assets/js/81.b09db84b.js"><link rel="prefetch" href="/assets/js/82.2bcbd31f.js"><link rel="prefetch" href="/assets/js/83.344d67cf.js"><link rel="prefetch" href="/assets/js/84.45bc9110.js"><link rel="prefetch" href="/assets/js/85.84a31255.js"><link rel="prefetch" href="/assets/js/86.fe802e40.js"><link rel="prefetch" href="/assets/js/87.be2bb441.js"><link rel="prefetch" href="/assets/js/88.3d367f79.js"><link rel="prefetch" href="/assets/js/89.87678ad0.js"><link rel="prefetch" href="/assets/js/9.87ad8bb5.js"><link rel="prefetch" href="/assets/js/90.f0b552b5.js"><link rel="prefetch" href="/assets/js/91.ab54ea37.js"><link rel="prefetch" href="/assets/js/92.f5490bfc.js"><link rel="prefetch" href="/assets/js/93.5cbe8d45.js"><link rel="prefetch" href="/assets/js/94.681b3734.js"><link rel="prefetch" href="/assets/js/95.f3017fa5.js"><link rel="prefetch" href="/assets/js/96.52ebd59a.js"><link rel="prefetch" href="/assets/js/97.e28a6ef9.js"><link rel="prefetch" href="/assets/js/98.84e88e28.js"><link rel="prefetch" href="/assets/js/99.9f1258fc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fd8a955e.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="The Complete Backend Engineer" class="logo"> <span class="site-name can-hide">The Complete Backend Engineer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java核心技术" class="dropdown-title"><a href="/java-core/" class="link-title">Java核心技术</a> <span class="title" style="display:none;">Java核心技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Java并发编程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/pages/7e6285/" class="nav-link">浅谈Java并发安全发布技术</a></li><li class="dropdown-subitem"><a href="/pages/bb708f/" class="nav-link">浅谈Java线程池中拒绝策略与流控的艺术</a></li><li class="dropdown-subitem"><a href="/pages/ea4da6/" class="nav-link">深入源码解析synchronized关键字</a></li><li class="dropdown-subitem"><a href="/pages/a62174/" class="nav-link">浅谈Java并发编程中断的哲学</a></li><li class="dropdown-subitem"><a href="/pages/54f168/" class="nav-link">深入理解Java中的final关键字</a></li><li class="dropdown-subitem"><a href="/pages/d9feaf/" class="nav-link">深入剖析Java并发编程中的死锁问题</a></li><li class="dropdown-subitem"><a href="/pages/e171b0/" class="nav-link">浅谈池化技术的优雅关闭</a></li><li class="dropdown-subitem"><a href="/pages/96493d/" class="nav-link">synchronized关键字使用指南</a></li><li class="dropdown-subitem"><a href="/pages/17210f/" class="nav-link">浅谈并发编程等待通知模型</a></li><li class="dropdown-subitem"><a href="/pages/d2df46/" class="nav-link">浅谈传统并发编程的优化思路</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/78918f/" class="nav-link">从零开始理解JVM的JIT编译机制</a></li><li class="dropdown-subitem"><a href="/pages/8e1e94/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简明的Arthas配置及基础运维教程</a></li><li class="dropdown-subitem"><a href="/pages/1ac322/" class="nav-link">基于Arthas Idea的JVM故障排查与指令生成</a></li><li class="dropdown-subitem"><a href="/pages/fca4af/" class="nav-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li class="dropdown-subitem"><a href="/pages/78439b/" class="nav-link">深入剖析arthas技术原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/cs/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机组成原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aa591a/" class="nav-link">浅谈CPU流水线的艺术</a></li></ul></li><li class="dropdown-item"><h4>操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a32bff/" class="nav-link">Linux性能问题排查最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/8902d5/" class="nav-link">Linux上IO性能问题的故障排除实践</a></li><li class="dropdown-subitem"><a href="/pages/09184d/" class="nav-link">浅谈Linux权限管理</a></li><li class="dropdown-subitem"><a href="/pages/29f9e1/" class="nav-link">从操作系统底层浅谈程序栈的高效性</a></li></ul></li><li class="dropdown-item"><h4>编码最佳实践</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/968465/" class="nav-link">浅谈现代软件工程TDD最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/2b73d8/" class="nav-link">浅谈TDD模式下并发程序设计与实现</a></li><li class="dropdown-subitem"><a href="/pages/50d82f/" class="nav-link">面向AI编程新范式Trae后端开发环境搭建与实践</a></li><li class="dropdown-subitem"><a href="/pages/3d2b25/" class="nav-link">基于提示词工程的Redis签到功能开发实践</a></li><li class="dropdown-subitem"><a href="/pages/745def/" class="nav-link">基于Vibe Coding的Redis分页查询实现</a></li><li class="dropdown-subitem"><a href="/pages/5b74d3/" class="nav-link">告别AI无效对话：资深工程师的提示词设计最佳实践</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员日常" class="dropdown-title"><a href="/coder-life/" class="link-title">程序员日常</a> <span class="title" style="display:none;">程序员日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实用技巧与配置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9dae72/" class="nav-link">Mac常用快捷键与效率插件指南</a></li></ul></li><li class="dropdown-item"><h4>写作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/38a0f7/" class="nav-link">写好技术博客的5大核心原则：从认知科学到AI工具的全流程指南</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程工具" class="dropdown-title"><a href="/technology/" class="link-title">编程工具</a> <span class="title" style="display:none;">编程工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/609690/" class="nav-link">IDEA配置详解与高效使用指南</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sharkchili/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jsd.cdn.zzko.cn/gh/sharkchili/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>sharkchili</h3> <span>计算机禅修者</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java核心技术" class="dropdown-title"><a href="/java-core/" class="link-title">Java核心技术</a> <span class="title" style="display:none;">Java核心技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Java并发编程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/pages/7e6285/" class="nav-link">浅谈Java并发安全发布技术</a></li><li class="dropdown-subitem"><a href="/pages/bb708f/" class="nav-link">浅谈Java线程池中拒绝策略与流控的艺术</a></li><li class="dropdown-subitem"><a href="/pages/ea4da6/" class="nav-link">深入源码解析synchronized关键字</a></li><li class="dropdown-subitem"><a href="/pages/a62174/" class="nav-link">浅谈Java并发编程中断的哲学</a></li><li class="dropdown-subitem"><a href="/pages/54f168/" class="nav-link">深入理解Java中的final关键字</a></li><li class="dropdown-subitem"><a href="/pages/d9feaf/" class="nav-link">深入剖析Java并发编程中的死锁问题</a></li><li class="dropdown-subitem"><a href="/pages/e171b0/" class="nav-link">浅谈池化技术的优雅关闭</a></li><li class="dropdown-subitem"><a href="/pages/96493d/" class="nav-link">synchronized关键字使用指南</a></li><li class="dropdown-subitem"><a href="/pages/17210f/" class="nav-link">浅谈并发编程等待通知模型</a></li><li class="dropdown-subitem"><a href="/pages/d2df46/" class="nav-link">浅谈传统并发编程的优化思路</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/78918f/" class="nav-link">从零开始理解JVM的JIT编译机制</a></li><li class="dropdown-subitem"><a href="/pages/8e1e94/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简明的Arthas配置及基础运维教程</a></li><li class="dropdown-subitem"><a href="/pages/1ac322/" class="nav-link">基于Arthas Idea的JVM故障排查与指令生成</a></li><li class="dropdown-subitem"><a href="/pages/fca4af/" class="nav-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li class="dropdown-subitem"><a href="/pages/78439b/" class="nav-link">深入剖析arthas技术原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/cs/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机组成原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aa591a/" class="nav-link">浅谈CPU流水线的艺术</a></li></ul></li><li class="dropdown-item"><h4>操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a32bff/" class="nav-link">Linux性能问题排查最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/8902d5/" class="nav-link">Linux上IO性能问题的故障排除实践</a></li><li class="dropdown-subitem"><a href="/pages/09184d/" class="nav-link">浅谈Linux权限管理</a></li><li class="dropdown-subitem"><a href="/pages/29f9e1/" class="nav-link">从操作系统底层浅谈程序栈的高效性</a></li></ul></li><li class="dropdown-item"><h4>编码最佳实践</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/968465/" class="nav-link">浅谈现代软件工程TDD最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/2b73d8/" class="nav-link">浅谈TDD模式下并发程序设计与实现</a></li><li class="dropdown-subitem"><a href="/pages/50d82f/" class="nav-link">面向AI编程新范式Trae后端开发环境搭建与实践</a></li><li class="dropdown-subitem"><a href="/pages/3d2b25/" class="nav-link">基于提示词工程的Redis签到功能开发实践</a></li><li class="dropdown-subitem"><a href="/pages/745def/" class="nav-link">基于Vibe Coding的Redis分页查询实现</a></li><li class="dropdown-subitem"><a href="/pages/5b74d3/" class="nav-link">告别AI无效对话：资深工程师的提示词设计最佳实践</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员日常" class="dropdown-title"><a href="/coder-life/" class="link-title">程序员日常</a> <span class="title" style="display:none;">程序员日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实用技巧与配置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9dae72/" class="nav-link">Mac常用快捷键与效率插件指南</a></li></ul></li><li class="dropdown-item"><h4>写作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/38a0f7/" class="nav-link">写好技术博客的5大核心原则：从认知科学到AI工具的全流程指南</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程工具" class="dropdown-title"><a href="/technology/" class="link-title">编程工具</a> <span class="title" style="display:none;">编程工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/609690/" class="nav-link">IDEA配置详解与高效使用指南</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sharkchili/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sidebar-slot sidebar-slot-top"><!--  固定100% * 150px可显示，max-height:150px 未见显示-->
       <ins class="adsbygoogle"
             style="display:inline-block;width:100%;max-height:150px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8819267679"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script>

</div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JVM相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/78918f/" class="sidebar-link">从零开始理解JVM的JIT编译机制</a></li><li><a href="/pages/8e1e94/" aria-current="page" class="active sidebar-link">简明的Arthas配置及基础运维教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#写在文章开头" class="sidebar-link">写在文章开头</a></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#arthas基础说明与配置演示" class="sidebar-link">Arthas基础说明与配置演示</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#arthas的运行原理-理解" class="sidebar-link">Arthas的运行原理(理解)</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#下载安装" class="sidebar-link">下载安装</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#离线用户的使用姿势-可选阅读" class="sidebar-link">离线用户的使用姿势(可选阅读)</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#常见指令介绍" class="sidebar-link">常见指令介绍</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#快捷启动配置" class="sidebar-link">快捷启动配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#arthas中比较常用的运维指令" class="sidebar-link">Arthas中比较常用的运维指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看实时数据面板" class="sidebar-link">查看实时数据面板</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看jvm信息" class="sidebar-link">查看JVM信息</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看和修改日志级别" class="sidebar-link">查看和修改日志级别</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看jvm内存信息" class="sidebar-link">查看JVM内存信息</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看jvm的环境变量" class="sidebar-link">查看JVM的环境变量</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看和修改jvm系统属性" class="sidebar-link">查看和修改JVM系统属性</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看当前jvm线程堆栈信息" class="sidebar-link">查看当前JVM线程堆栈信息</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#vmtool对于jvm的调控" class="sidebar-link">vmtool对于JVM的调控</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#常见的运维操作示例" class="sidebar-link">常见的运维操作示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#反编译查看代码" class="sidebar-link">反编译查看代码</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看字段详情" class="sidebar-link">查看字段详情</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#查看方法列表" class="sidebar-link">查看方法列表</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#静态变量监控" class="sidebar-link">静态变量监控</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#基于arthas进行问题诊断" class="sidebar-link">基于Arthas进行问题诊断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#定位cpu-100-问题" class="sidebar-link">定位CPU 100%问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#定位线程死锁问题" class="sidebar-link">定位线程死锁问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#运行耗时性能问题排查" class="sidebar-link">运行耗时性能问题排查</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#方法耗时统计" class="sidebar-link">方法耗时统计</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#定位出入参错误问题" class="sidebar-link">定位出入参错误问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#监控方法调用路径" class="sidebar-link">监控方法调用路径</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#获取方法调用的过程" class="sidebar-link">获取方法调用的过程</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#内存溢出问题" class="sidebar-link">内存溢出问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#arthas的一些进阶操作" class="sidebar-link">Arthas的一些进阶操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#线上替换代码" class="sidebar-link">线上替换代码</a></li><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#获取spring上下文进行进一步分析操作" class="sidebar-link">获取spring上下文进行进一步分析操作</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#常见问题" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8e1e94/#arthas统计方法耗时watch指令的原理是什么" class="sidebar-link">arthas统计方法耗时watch指令的原理是什么</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header level2"><a href="/pages/8e1e94/#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/pages/1ac322/" class="sidebar-link">基于Arthas Idea的JVM故障排查与指令生成</a></li><li><a href="/pages/fca4af/" class="sidebar-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li><a href="/pages/78439b/" class="sidebar-link">深入剖析arthas技术原理</a></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
         <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8723616095"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF" title="分类" data-v-06225672>Java核心技术</a></li><li data-v-06225672><a href="/categories/?category=JVM%E7%9B%B8%E5%85%B3" title="分类" data-v-06225672>JVM相关</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/shkctl" target="_blank" title="作者" class="beLink" data-v-06225672>sharkchili</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-12-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">简明的Arthas配置及基础运维教程<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
        <ins class="adsbygoogle"
             style="display:inline-block;width:100%;max-height:90px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8542375009"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div> <div class="theme-vdoing-content content__default"><h2 id="写在文章开头"><a href="#写在文章开头" class="header-anchor">#</a> 写在文章开头</h2> <p><code>Arthas</code>是一款强大的开源<code>Java</code>诊断程序，它可以非常方便的启动并以界面式的方式和<code>Java</code>程序进行交互,支持监控程序的内存使用情况、线程信息、gc情况、甚至可以反编译并修改现上代码等。所以它成为笔者进行线上问题排查的重要手段，而本文将从实际使用的角度介绍一下<code>arthas</code>的基本使用技巧，希望对你有帮助。</p> <p>我是 <strong>SharkChili</strong> ，Java 开发者，<strong>Java Guide</strong> 开源项目维护者。欢迎关注我的公众号：<strong>写代码的SharkChili</strong>，也欢迎您了解我的开源项目 mini-redis：<a href="https://github.com/shark-ctrl/mini-redis" target="_blank" rel="noopener noreferrer">https://github.com/shark-ctrl/mini-redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="arthas基础说明与配置演示"><a href="#arthas基础说明与配置演示" class="header-anchor">#</a> Arthas基础说明与配置演示</h2> <h3 id="arthas的运行原理-理解"><a href="#arthas的运行原理-理解" class="header-anchor">#</a> Arthas的运行原理(理解)</h3> <p><code>arthas</code>的运行原理大致是以下几个步骤:</p> <ol><li>启动<code>arthas</code>选择目标<code>Java</code>程序后，<code>arthas</code>会向目标程序注入一个代理。</li> <li>代理会创建一个集<code>HTTP</code>和<code>Telnet</code>的服务器与客户端建立连接。</li> <li>客户端与服务端建立连接。</li> <li>后续客户端需要监控或者调整程序都可以通过服务端<code>Java Instrumentation</code>机制和应用程序产生交互。</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512010949964.png" alt=""></p> <h3 id="下载安装"><a href="#下载安装" class="header-anchor">#</a> 下载安装</h3> <p>文章开始前，我们需要先下载安装一下<code>Arthas</code>，<code>Arthas</code>的官方地址为:<a href="https://arthas.aliyun.com/" target="_blank" rel="noopener noreferrer">https://arthas.aliyun.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>考虑到方便笔者一般是使用命令行的方式下载:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-O</span> https://arthas.aliyun.com/arthas-boot.jar

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>完成后我们通过下面jar命令将<code>Arthas</code>启动：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> arthas-boot.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时我们就可以看到对应的进程序号和进程的pid，以笔者为例，开启<code>arthas</code>之后就会看到一个序号为1的<code>9121</code>的<code>Java</code>进程，我们可以直接点击1并输入回车对此进程进行监控管理：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64/jre
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> arthas-boot version: <span class="token number">3.7</span>.2
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Found existing <span class="token function">java</span> process, please choose one and input the serial number of the process, eg <span class="token builtin class-name">:</span> <span class="token number">1</span>. Then hit ENTER.
* <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: <span class="token number">9121</span> arthasExample.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>随后<code>arthas</code>初次会进行相关依赖下载，然后我们就可以正式的使用<code>arthas</code>管理当前进程了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949087.png" alt=""></p> <h3 id="离线用户的使用姿势-可选阅读"><a href="#离线用户的使用姿势-可选阅读" class="header-anchor">#</a> 离线用户的使用姿势(可选阅读)</h3> <p>考虑到内网用户无法联网进行<code>arthas</code>初始化，所以<code>arthas</code>也人性化的提供了全量包的下载方式，有需要的读者可移步到下载页面选择全量包下载即可获取全量的<code>arthas</code>包：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949254.png" alt=""></p> <p>完成后下载并解压之后，我们可以直接通过下面这个脚本指令快速启动<code>arthas</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./as.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="常见指令介绍"><a href="#常见指令介绍" class="header-anchor">#</a> 常见指令介绍</h3> <p>步入<code>arthas</code>我们就可以进行一些比较基础的操作，以下是笔者日常用的比较多的指令，和<code>Linux</code>差不多，读者可自行参阅了解</p> <ol><li><code>cat</code>：打印文件内容。</li> <li><code>cls</code>：清空当前屏幕区域内容。</li> <li><code>grep</code>：匹配查找。</li> <li><code>history</code>：打印历史命令。</li> <li><code>pwd</code>：输入当前<code>Java</code>进程所在的位置。</li> <li><code>quit</code>：退出当前<code>arthas</code>客户端。</li> <li><code>stop</code>：关闭<code>arthas</code>服务端，所有<code>arthas</code>客户端都会退出。</li></ol> <p>这里笔者就简单的演示一下，可以看到<code>pwd</code>输出的就是笔者所监控的<code>Java</code>进程所处的文件目录：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>arthas@9121<span class="token punctuation">]</span>$ <span class="token builtin class-name">pwd</span>
<span class="token comment"># 当前监控的进程在服务器上的目录</span>
/home/sharkchili/arthasExample
<span class="token punctuation">[</span>arthas@9121<span class="token punctuation">]</span>$
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>又比如笔者通过<code>memory</code>查看堆内存使用情况，如果只想看老年代的数据，就可以使用grep:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>memory <span class="token operator">|</span><span class="token function">grep</span> ps_old_gen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>点击<code>quit</code>会直接退出当前进程的客户端，<code>stop</code>同理只不过多是连着服务端和其他客户端一并杀掉，这里就不多做演示了：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>
<span class="token punctuation">[</span>arthas@9121<span class="token punctuation">]</span>$ quit
<span class="token comment"># 直接返回到服务器的目录</span>
sharkchili@DESKTOP-7IPKPVJ:~/arthas$

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="快捷启动配置"><a href="#快捷启动配置" class="header-anchor">#</a> 快捷启动配置</h3> <p>为了快捷启动<code>arthas</code>，笔者也给出个人的配置方式，首先<code>vim</code>一个名为<code>as.sh</code>的脚本，其内容为<code>arthas-boot.jar</code>的启动指令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> /home/sharkchili/arthas/arthas-boot.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完成脚本编写确认启动无误之后，我们将这个脚本通过<code>alias</code>重命名的方式追加到<code>/etc/profile</code>下，内容如下即<code>sh</code>指令加上上述脚本的全路径：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">as</span><span class="token operator">=</span><span class="token string">&quot;sh /home/sharkchili/arthas/as.sh&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://qiniuyun.sharkchili.com/202512010949360.png" alt=""></p> <p>然后通过<code>source</code>指令使其生效即可。对应mac用户也是同理，指定下载arthas的jar包到指定路径后，编辑相同的启动脚本添加到<code>~/.zshrc</code>并通过<code>source</code>使之生效，以笔者为例则是：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">as</span><span class="token operator">=</span><span class="token string">&quot;/Users/sharkchili/arthas/as.sh&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到完成这样一段配直接后，我们可以直接通过<code>as</code>指令完成<code>arthas</code>的快捷启动：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949673.png" alt=""></p> <h2 id="arthas中比较常用的运维指令"><a href="#arthas中比较常用的运维指令" class="header-anchor">#</a> Arthas中比较常用的运维指令</h2> <h3 id="查看实时数据面板"><a href="#查看实时数据面板" class="header-anchor">#</a> 查看实时数据面板</h3> <p>日常开发维护过程中对于项目的巡检还是蛮重要的，通过<code>Arthas</code>的<code>dashboard</code>可以非常直观的查看当前系统中进程的运行情况。</p> <p>在<code>arthas</code>的控制面板输入<code>dashboard</code>，默认情况下<code>5s</code>进行一次刷新：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949803.png" alt=""></p> <p>这里我们来简单介绍一下第一板块线程中的字段的含义：</p> <ol><li><code>ID</code>:java级别的线程id号，注意与jstack中的<code>native id</code>的区别。</li> <li><code>NAME</code>:线程名称。</li> <li><code>GROUP</code>:线程所在线程组名。</li> <li><code>PRIORITY</code>:线程优先级，值越大优先级越高。</li> <li><code>STATE</code>:线程运行状态。</li> <li><code>CPU%</code>:线程CPU使用率。</li> <li><code>DELTA_TIME</code>:上次采样之后，线程运行的CPU时间，单位为秒。</li> <li><code>TIME</code>:线程运行的总CPU时长，数据格式为分:秒。</li> <li><code>INTERRUPTED</code>:线程当前的中断位状态。</li> <li><code>DAEMON</code> :是否为守护线程。</li></ol> <p>以本次输出位列，可以看到1号线程(一般都是main线程)信息为;</p> <ol><li>group为main线程组</li> <li>优先级为5也就是默认优先级</li> <li>线程处于运行也就是runnable状态</li> <li>本次采集到的CPU使用率为0</li> <li>因为是第一次采集且刚开始采集，所以<code>DELTA_TIME</code>运行时间为8s</li> <li>中断标志为为false</li> <li>main线程非守护线程</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512010949911.png" alt=""></p> <p>第二板块就是内存使用版块，记录各个堆区、元空间的内存使用情况以及GC情况，以笔者为例，当前项目使用jdk版本为8且使用的回收器对应新生代是<code>Parallel Scavenge收集器</code> + <code>老年代PS MarkSweep （其实跟Serial old共用同一份代码</code>），所以对应几个比较常用的参数含义分别是：</p> <ol><li>堆内存81M已使用30M</li> <li>新生代eden区31M已用14M，而survivor则是5M用了4M</li> <li>老年代45M已用11M</li> <li>元空间45M基本用完</li> <li>新生代触发3次gc耗时19ms</li> <li>老年代触发1次耗时21ms</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512010949026.png" alt=""></p> <p>而第三板块则是服务器运行参数版块，这一版块记录着程序当前运行服务器的内核版本信息、jdk版本等，以笔者为例则是Linux系统和jdk8版本：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949092.png" alt=""></p> <p>需要了解的是<code>arthas</code>中的操作指令可以通过<code>--help</code>了解查阅，我们以<code>dashboard</code>为例，其使用说明如下，可以看到我们可以通过-i决定面板刷新间隔(单位是毫秒)，用-n决定面板刷新次数：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949160.png" alt=""></p> <p>所以如果我们希望每1s刷新1次，刷新5次，那么对应的命令就是：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dashboard <span class="token parameter variable">-i</span> <span class="token number">1000</span> <span class="token parameter variable">-n</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查看jvm信息"><a href="#查看jvm信息" class="header-anchor">#</a> 查看JVM信息</h3> <p><code>arthas</code>也可能非常直观的查看<code>jvm</code>信息，对应的指令也就是<code>jvm</code>。</p> <p>同样的这个指令也会输出多个板块的内容，我们先来看看第一个板块，可以可以看到该指令可以非常直观的看到机器名称、jvm启动时间、jdk版本以及我们配置jvm参数信息：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949344.png" alt=""></p> <p>由于板块比较多，这里笔者就说几个笔者比较常用的板块，分别是线程板块和文件描述符板块，通过这两个板块笔者可以日常巡检了解是否发生线程死锁或者程序中是否出现资源未能及时关闭的情况:</p> <ol><li><code>THREAD</code>:它记录当前活跃线程数、活跃的守护线程数、从JVM启动开启曾经活着的最大线程数、总共启动线程数以及发生死锁的线程数。</li> <li><code>FILE-DESCRIPTOR</code>：这个板块记录JVM可以打开的最大文件描述符和当前已经打开的文件描述符数。</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512010949406.png" alt=""></p> <h3 id="查看和修改日志级别"><a href="#查看和修改日志级别" class="header-anchor">#</a> 查看和修改日志级别</h3> <p><code>logger</code>指令也算是笔者比较喜欢的指令，它可以非常直观的查看我们对于日志的配置，如下图，以笔者当前运行的程序为例，可以看到如下几个信息：</p> <ol><li>日志级别为<code>INFO</code>。</li> <li>存储错误日志的<code>ERROR_FILE</code>的相对路径。</li> <li>存储普通日志<code>INFO_FILE</code>的相对路径。</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512010949586.png" alt=""></p> <p>当然我们也可以查看指定名字的日志信息，例如我们想查看<code>com.example.arthasExample.TestController</code>的日志信息，就可以直接键入<code>logger -n com.example.arthasExample.TestController</code>指令进行查看：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949609.png" alt=""></p> <p><code>logger</code>指令还有一个比较实用的功能，即直接修改日志级别，例如我们希望修改<code>ROOT</code>这个名称的日志级别，就可以基于如下步骤完成修改：</p> <ol><li>获取<code>classLoader</code>的哈希码。</li> <li>基于哈希码通过<code>logger</code>指令修改日志级别。</li></ol> <p>我们程序中有这样一段代码，此时我们请求下面这个接口只会输出<code>info</code>级别的日志：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/user/logger&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loggerPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info logger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug logger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>对应的输出结果为：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">2024</span>-08-19 <span class="token number">23</span>:53:29.454  INFO  c.e.a.TestController          :138  http-nio-8080-exec-1                    info logger

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>接下来我们就直接通过<code>arthas</code>修改日志级别，首先我们需要获取当前<code>classloader</code>的哈希码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> com.example.arthasExample.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://qiniuyun.sharkchili.com/202512010949729.png" alt=""></p> <p>然后我们直接通过这个哈希码，执行如下指令将日志设置为debug</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>logger <span class="token parameter variable">-c</span> 306a30c7 <span class="token parameter variable">--name</span> ROOT <span class="token parameter variable">--level</span> debug
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>于是<code>debug</code>日志就出现了：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">2024</span>-08-20 00:13:31.438  INFO  c.e.a.TestController          :138  http-nio-8080-exec-6                    info logger
<span class="token number">2024</span>-08-20 00:13:31.439  DEBUG c.e.a.TestController          :139  http-nio-8080-exec-6                    debug logger

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看jvm内存信息"><a href="#查看jvm内存信息" class="header-anchor">#</a> 查看JVM内存信息</h3> <p>接下来就是<code>memory</code>指令，这也是笔者比较常用的指令之一，通过<code>memory</code>我们可以监控到当前内存的使用情况。如下图所示，键入<code>memory</code>指令后我们就可以看到这些区域的内存已用、总大小、最大值以及使用率等信息：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949846.png" alt=""></p> <p>对应的我们也给出上文中<code>memory</code>各行代表的含义：</p> <ol><li><code>heap</code>:堆区内存。</li> <li><code>ps_eden_space</code>:堆内存中新生代<code>Eden</code>区。</li> <li><code>ps_survivor_space</code>:堆内存中新生代<code>survivor</code>区。</li> <li><code>ps_old_gen</code>:堆内存老年代区。</li> <li><code>nonheap</code>:非堆内存，即堆内存之外的内存。</li> <li><code>code_cache</code>:因为Java执行是将字节码编译为机器码，而这个区域就是用于缓存这部分代码。</li> <li><code>metaspace</code>:元空间，以jdk1.8为例该空间是用于存储Java类和方法的元数据信息、常量池等。</li> <li><code>compressed_class_space</code>:存放类文件信息的区域。</li></ol> <p>对应的我们在这里也简单的复习一下<code>JVM</code>内存区域的分布，建议读者可参考下图了解<code>memory</code>指令中各个字段的含义：
<img src="https://qiniuyun.sharkchili.com/202512010949137.png" alt=""></p> <h3 id="查看jvm的环境变量"><a href="#查看jvm的环境变量" class="header-anchor">#</a> 查看JVM的环境变量</h3> <p><code>arthas</code>的<code>sysenv</code>指令常用于获取系统环境变量信息，键入这条指令我们可以看到当前java程序所使用的系统大部分环境变量信息，如下图，可以看到大部分的当前系统用户名称、编码格式、当前程序路径以及客户端ip和端口号等信息：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949329.png" alt=""></p> <p>根据<code>help</code>的提示，这条指令同样也支持查询单个环境变量，不过意义不大，毕竟不是每个都知道环境变量叫什么，只有查看了才知道(笑):</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>arthas@23543<span class="token punctuation">]</span>$ sysenv <span class="token environment constant">PWD</span>
 KEY                                              VALUE                                                                                                                                                                                               
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 <span class="token environment constant">PWD</span>                                              /home/sharkchili/arthasExample
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="查看和修改jvm系统属性"><a href="#查看和修改jvm系统属性" class="header-anchor">#</a> 查看和修改JVM系统属性</h3> <p><code>sysprop</code>查看的jvm的系统属性，基本上通过这个指令我们可以看到大部分的<code>JVM</code>参数配置信息，如下输出结果，我们大体可以看到JDK版本、程序名称以及日志编码格式和当前系统用户名称等：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949503.png" alt=""></p> <h3 id="查看当前jvm线程堆栈信息"><a href="#查看当前jvm线程堆栈信息" class="header-anchor">#</a> 查看当前JVM线程堆栈信息</h3> <p><code>arthas</code>提供<code>thread</code>指令用于查看线程情况，如下所示，它基本打印了线程计数信息和几个活跃的线程的实时情况，默认情况下，它是按照<code>CPU</code>增量时间降序进行排序：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949682.png" alt=""></p> <p>按照<code>help</code>的提示，我们也可以通过-n打印前几个忙碌的线程调用堆栈信息，如下所示，笔者希望打印出前2条忙碌的线程，键入的指令为<code>thread -n 2</code>:</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949902.png" alt=""></p> <p>同时<code>arthas</code>也支持按照时间间隔进行输出打印，比如我们希望列出5s内最忙的3个线程，那么对应的指令就是：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>thread <span class="token parameter variable">-n</span> <span class="token number">3</span> <span class="token parameter variable">-i</span> <span class="token number">5000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当我们的Java程序有大量的线程时候，我们希望筛选中某种状态的线程，我们可以通过<code>--state</code>指定，例如我们希望打印处于<code>RUNNABLE</code>状态的线程，那么我们就可以键入<code>thread --state RUNNABLE</code>来获得输出结果：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949043.png" alt=""></p> <p>对于死锁问题，我们也可以通过-b指令来定位查看当前程序是否存在阻塞其他线程的线程，如下图所示，以笔者为例当前程序就不存在死锁的情况：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949137.png" alt=""></p> <p>此时我们给出一个触发死锁的接口并调用：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;dead-lock&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//线程1先取得锁1，休眠后取锁2</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t1 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>


                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t1 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//线程2先取得锁2，休眠后取锁1</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t2 successfully acquired the lock2......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>


                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t2 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>此时，键入-b指令就可以定位阻塞其他线程的线程以及所在代码段：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949325.png" alt=""></p> <h3 id="vmtool对于jvm的调控"><a href="#vmtool对于jvm的调控" class="header-anchor">#</a> vmtool对于JVM的调控</h3> <p>vmtool算是笔者用的比较多的一个工具指令，可用于查询对象或者强制GC等功能，这些功能读者可自行参考官网查阅：</p> <p>vmtool:<a href="https://arthas.aliyun.com/doc/vmtool.html" target="_blank" rel="noopener noreferrer">https://arthas.aliyun.com/doc/vmtool.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>而笔者这里想要介绍的是一个强制打断线程的功能，这个指令对于特定场景下应急处理还是蛮实用的。</p> <p>我们的程序调用下面的接口被系统监控到CPU100%，此时我们就可以通过arthas进行特定场景下的应急处理：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;cpu-100&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//无限循环输出打印</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cpu working&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;thread-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我们通过thread指令看到thread-1基本将单个CPU跑满了，并且我们通过控制台定位到对应的id为48：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949536.png" alt=""></p> <p>此时我们可以通过<code>vmtool</code>的<code>action</code>指令将线程打断：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>vmtool <span class="token parameter variable">--action</span> interruptThread <span class="token parameter variable">-t</span> <span class="token number">48</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完成操作之后即可看到这个线程被我们成功打断了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949682.png" alt=""></p> <p>同时<code>vmTool</code>也支持观测变量的详情，以下面这个实例变量<code>dateTimeStr</code> 为例，每次接口请求都会实时刷新：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">String</span> dateTimeStr <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/getVal&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dateTimeStr <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;dateTimeStr: {}&quot;</span><span class="token punctuation">,</span> dateTimeStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果我们希望查看此刻dateTimeStr 的值，我们就可以通过<code>vmtool</code>的<code>action</code>指定为<code>getInstances</code> ，然后指定类的全路径<code>(以笔者这段代码为例则是com.example.arthasExample.TestController)</code>，最后键入表达式<code>instances[0].dateTimeStr</code>意为获取当前实例的<code>dateTimeStr</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>vmtool  <span class="token parameter variable">--action</span> getInstances <span class="token parameter variable">--className</span> com.example.arthasExample.TestController  <span class="token parameter variable">--express</span> <span class="token string">'instances[0].dateTimeStr'</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时我们就可以非常直观的监控到这个变量的信息了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949787.png" alt=""></p> <h2 id="常见的运维操作示例"><a href="#常见的运维操作示例" class="header-anchor">#</a> 常见的运维操作示例</h2> <h3 id="反编译查看代码"><a href="#反编译查看代码" class="header-anchor">#</a> 反编译查看代码</h3> <p>上文我们其实已经用到了jad这个反编译命令，对于笔者来说，<code>jad</code>有两种比较常见的用法，除了上述那种反编译类的指令<code>jad --source-only 类的包路径</code>，还有一种定位方法代码段的命令<code>jad --source-only 类的包路径 方法名</code>。</p> <p>例如笔者想定位<code>TestController</code>的<code>deadLock</code>代码，我们就可以键入:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>jad <span class="token operator">--</span>source<span class="token operator">-</span>only  <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>arthasExample<span class="token punctuation">.</span></span>TestController</span> deadLock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如下图，我们可以直接看到的方法的代码:</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949885.png" alt=""></p> <h3 id="查看字段详情"><a href="#查看字段详情" class="header-anchor">#</a> 查看字段详情</h3> <p>我们希望看到某个类下所有字段的详情，我们就可以使用这条命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> <span class="token parameter variable">-f</span> 类的包路径
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例如笔者想查看<code>TestController</code>的字段详情，就可以键入这条命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> <span class="token parameter variable">-f</span> com.example.arthasExample.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到这条指令不仅可以查看字段的定义和注解，还可以查看线程池的使用情况以及集合内部的<code>value</code>：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949968.png" alt=""></p> <h3 id="查看方法列表"><a href="#查看方法列表" class="header-anchor">#</a> 查看方法列表</h3> <p>这条命令笔者不是很常用，为了教程的完整性笔者也演示一下，假如我们希望查看某个类的方法，可以使用:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sm 类的包路径
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以笔者为例,查看<code>TestController</code>的方法为:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> sm com.example.arthasExample.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出结果如下:</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949053.png" alt=""></p> <h3 id="静态变量监控"><a href="#静态变量监控" class="header-anchor">#</a> 静态变量监控</h3> <p><code>Arthas</code>提供了对静态变量的分析，以下面这段代码为例，如果笔者希望看到<code>list</code> 内部详情，我们就可以使用<code>ognl</code>表达式获取：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;val&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在我们执行完接口完成添加操作之后，我们可以直接使用ognl进行监控。例如我们希望查看上述list的内容，我们就可以使用命令:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> ognl <span class="token string">'@类的包路径@变量名'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所以如果笔者查看list的命令为:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> ognl <span class="token string">'@com.example.arthasExample.TestController@list'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意，某些场景下使用ongl表达式查看字段信息需要指明<code>classLoader</code>的<code>hashCode</code>，否则会报错，所以我们需要通过sc指令先获取当前类的hashCode：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> com.example.arthasExample.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如下图<code>TestController</code>的类加载器的哈希码为<code>68de145</code>:</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949142.png" alt=""></p> <p>于是对应的指令我们可以改为<code>ognl -c 68de145 '@com.example.arthasExample.TestController@list'</code>，而输出结果如下，可以看到变量的类型和数值都可以看到：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949233.png" alt=""></p> <p>当然<code>ognl</code>还有一些比较特殊的用法，例如查看集合的长度，添加元素到集合中等操作，具体可以参考<code>GitHub</code>这个<code>issue</code>:</p> <p>https://github.com/alibaba/arthas/issues/71:<a href="https://github.com/alibaba/arthas/issues/71" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/arthas/issues/71<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="基于arthas进行问题诊断"><a href="#基于arthas进行问题诊断" class="header-anchor">#</a> 基于Arthas进行问题诊断</h2> <h3 id="定位cpu-100-问题"><a href="#定位cpu-100-问题" class="header-anchor">#</a> 定位CPU 100%问题</h3> <p><code>CPU 100%</code>问题算是生产环境下最难排查的问题了，在没有<code>Arthas</code>之前，我们常规的排查思路大致为:</p> <ol><li>使用<code>top</code>确定是否为<code>java</code>进程。</li> <li>明确是当前<code>java</code>进程之后，通过<code>jps</code>定位<code>java</code>进程号。</li> <li>找到最吃资源的线程号。</li> <li>将线程号转为十六进制。</li> <li>通过<code>jstack</code>导出日志并使用全局搜索十六进制线程号定位到问题代码段。</li></ol> <p>有了<code>Arthas</code>之后，问题的定位就会简单快速许多，为了演示这个例子，笔者编写了一段模拟<code>CPU 100%</code>问题的代码段:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> threadPool <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;cpu-100&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//无限循环输出打印</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cpu working&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;thread-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>我们不断请求该地址，不久后你就会发现CPU直接飙升接近100%，此时我们的arthas就派上用场了，首先我们自然是将<code>arthas</code>启动。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> arthas-boot.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时控制台会出现下面几个选项，它通过不同序号标明不同的Java程序，我们看到我们的目标程序<code>ArthasExampleApplication</code>，序号为1，所以我们输入1按回车。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>F:<span class="token punctuation">\</span>github<span class="token operator">&gt;</span>java <span class="token parameter variable">-jar</span> arthas-boot.jar
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> JAVA_HOME: D:<span class="token punctuation">\</span>myinstall<span class="token punctuation">\</span>jdk8<span class="token punctuation">\</span>jre8
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> arthas-boot version: <span class="token number">3.6</span>.9
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Found existing <span class="token function">java</span> process, please choose one and input the serial number of the process, eg <span class="token builtin class-name">:</span> <span class="token number">1</span>. Then hit ENTER.
* <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: <span class="token number">18720</span> com.example.arthasExample.ArthasExampleApplication
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: <span class="token number">19300</span> org.jetbrains.jps.cmdline.Launcher
  <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: <span class="token number">7876</span> org.jetbrains.idea.maven.server.RemoteMavenServer
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>: <span class="token number">14488</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>进入控制台，我们直接键入thread命令可以看到，有一个名为 <code>pool-1-thread-1</code>的线程CPU使用率非常高，所以我们需要定位它所工作的代码段。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949396.png" alt=""></p> <p>由控制台可知，它的序号为59，所以我们直接键入:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> thread <span class="token number">59</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>很快的，我们直接定位到了问题代码段，在<code>TestController</code>的42行。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949497.png" alt=""></p> <p>知道了代码的位置之后，我们根据类的包路径<code>com.example.arthasExample.TestController</code>直接通过<code>Arthas</code>反编译查看源码，命令如下:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>jad --source-only  com.example.arthasExample.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最终我们定位到了问题代码，即时修复即可：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949558.png" alt=""></p> <h3 id="定位线程死锁问题"><a href="#定位线程死锁问题" class="header-anchor">#</a> 定位线程死锁问题</h3> <p>对于线程死锁问题，我们也给出下面这样一段示例代码，线程1先取锁1再取锁2，线程2反之，两者取锁顺序构成环路造成死锁。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">//两把锁</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> lock1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> lock2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;dead-lock&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//线程1先取得锁1，休眠后取锁2</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t1 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>


                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t1 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//线程2先取得锁2，休眠后取锁1</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t2 successfully acquired the lock2......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>


                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;t2 successfully acquired the lock1......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>了解代码流程之后，我们直接调用这个接口，打开<code>Arthas</code>查看键入<code>thread</code>线程信息可以看到我们的t1和t2两个线程处于等待状态，大概率存在问题。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949641.png" alt=""></p> <p>随后我们直接键入<code>thread -b</code>，发现t2线程被锁住了，由此断定这两个线程看定存在死锁，</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949741.png" alt=""></p> <p>由上述结果我们可知两个线程的id分别是65和66，所以使用<code>thread id号</code>的命令直接定位到问题代码段并解决问题即可。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949851.png" alt=""></p> <h3 id="运行耗时性能问题排查"><a href="#运行耗时性能问题排查" class="header-anchor">#</a> 运行耗时性能问题排查</h3> <p>对于统计耗时的操作我们经常会用打日志的方式来监控，在环境复杂的生产环境，我们常因为欠缺考虑而忘记对某些方法进行监控。
同样的<code>Arthas</code>也为我们提供了一些便捷的命令来完成对方法耗时的监控与统计。</p> <p>这里笔者这里给出一段<code>UserServiceImpl</code> 模拟用户查询时进行参数校验、其他<code>service</code>调用、<code>redis</code>调用、<code>MySQL</code>调用。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">queryUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">check</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">service</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">redis</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token function">mysql</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;调用其他service。。。。。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">redis</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;查看redis缓存数据。。。。。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">mysql</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;查询MySQL数据......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject<span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject<span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> jsonObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uid <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> uid <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;非法用户id，uid:{}&quot;</span><span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;非法用户id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>对应的<code>controller</code>代码如下，假如我们在生产环境下发现这个接口非常耗时，我们又没有日志，那么我们如何利用<code>Arthas</code>排查耗时问题呢？</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserServiceImpl</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">queryUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">queryUser</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我们可以用<code>trace</code>命令，我们首先用<code>trace</code>追踪一下<code>TestController</code> 的<code>queryUser</code>耗时的调用:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>trace com.example.arthasExample.TestController queryUser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以发现<code>TestController</code> 并无异常，所有的耗时都在<code>UserServiceImpl</code> :</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949027.png" alt=""></p> <p>所以我们再对<code>UserServiceImpl</code> 的<code>queryUser</code>进行追踪：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> trace com.example.arthasExample.UserServiceImpl queryUser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完成命令键入后，控制台就会阻塞监控这个方法，然后我们调用一下这个接口，可以发现原来是<code>MySQL</code>查询非常耗时，由此我们就可以进一步去推断问题了。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949039.png" alt=""></p> <h3 id="方法耗时统计"><a href="#方法耗时统计" class="header-anchor">#</a> 方法耗时统计</h3> <p>有时候我们希望监控某个方法单位时间内请求的耗时和调用情况，我们就可以使用monitor命令，例如我们希望每5s查看TestController 的queryUser的情况，我们就可以键入:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> monitor  <span class="token parameter variable">-c</span> <span class="token number">5</span> com.example.arthasExample.TestController queryUser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到控制台会每5s输入请求次数、成功和失败次数以及平均耗时等信息。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949071.png" alt=""></p> <h3 id="定位出入参错误问题"><a href="#定位出入参错误问题" class="header-anchor">#</a> 定位出入参错误问题</h3> <p>有时候我们希望定位某个日志没有打到的方法的出入参详情，例如上面的mysql()的出入参，我们完全可以通过<code>Arthas</code>的<code>watch</code>方法做到，对应命令为:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">watch</span> com.example.arthasExample.UserServiceImpl mysql <span class="token string">'{params[0],returnObj}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到，我们的入参为1，出参是一个对象。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949154.png" alt=""></p> <p>更进一步，假如我们希望可以打印出对象的内容，那么我们就可以使用<code>toString</code>方法做到</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">watch</span> com.example.arthasExample.UserServiceImpl mysql <span class="token string">'{params[0],returnObj.toString()}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://qiniuyun.sharkchili.com/202512010949209.png" alt=""></p> <p>除此之外watch 还支持很多的骚操作，具体可以参考官方文档:</p> <p>https://arthas.aliyun.com/doc/watch.html:<a href="https://arthas.aliyun.com/doc/watch.html" target="_blank" rel="noopener noreferrer">https://arthas.aliyun.com/doc/watch.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="监控方法调用路径"><a href="#监控方法调用路径" class="header-anchor">#</a> 监控方法调用路径</h3> <p>还是以上文mysql方法为例，如果我们希望快速定位到它的调用路径，我们可以使用stack方法:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>stack com.example.arthasExample.UserServiceImpl mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到详细的调用路径直接输出到控制台。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949313.png" alt=""></p> <h3 id="获取方法调用的过程"><a href="#获取方法调用的过程" class="header-anchor">#</a> 获取方法调用的过程</h3> <p>我们希望查看方法调用时出现异常的原因，出参和入参时，可以使用tt这条指令,例如我们想查看check方法为何会报错，我们就可以使用tt</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt <span class="token parameter variable">-t</span> com.example.arthasExample.UserServiceImpl check
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从输出结果来看，第二次抛出异常了，我们可以基于<code>1001</code>这个索引去定位问题。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949373.png" alt=""></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> tt <span class="token parameter variable">-i</span> <span class="token number">1001</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最终可以得出，入参为-1：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949453.png" alt=""></p> <p>如果我们想重新发起调用，可以直接使用：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt <span class="token parameter variable">-i</span> <span class="token number">1001</span> <span class="token parameter variable">-p</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>需要强调的是，tt 命令是将当前环境的对象引用保存起来，但仅仅也只能保存一个引用而已。如果方法内部对入参进行了变更，或者返回的对象经过了后续的处理，那么在 tt 查看的时候将无法看到当时最准确的值。这也是为什么 watch 命令存在的意义。</p></blockquote> <p>所以使用完tt指令后，我们建议清除所有的 tt 记录：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt --delete-all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="内存溢出问题"><a href="#内存溢出问题" class="header-anchor">#</a> 内存溢出问题</h3> <p>以下面这段代码为例，通过不断发起请求调用，复现<code>OOM</code>问题：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">ThreadPoolExecutor</span> poolExecutor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建线程池，通过线程池，保证创建的线程存活</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/oom&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">oom</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        poolExecutor<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Byte</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            localVariable<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 为线程添加变量</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>然后通过<code>arthas</code>发现老年代内存几乎已满，gc也十分频繁。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949613.png" alt=""></p> <p>由此我们可以直接使用<code>Arthas</code>的<code>heapdump</code> 导出文件到mat中进行进一步分析。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> heapdump D://heap.hprof
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>导出的结果如下，后续我们就可以点击detail推断到问题的源头了。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949707.png" alt=""></p> <p>最终我们很快速的定位到了问题代码:</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949779.png" alt=""></p> <h2 id="arthas的一些进阶操作"><a href="#arthas的一些进阶操作" class="header-anchor">#</a> Arthas的一些进阶操作</h2> <h3 id="线上替换代码"><a href="#线上替换代码" class="header-anchor">#</a> 线上替换代码</h3> <p>有时候我们测试难免会遗漏一些情况，如下所示，我们业务要求id小于1才抛出异常，但是我们因为粗心而将判断条件写成id&lt;2，结果懵懵懂懂的就将这段代码部到了生产环境，导致业务查询出了问题。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/user/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;id: {}&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> id <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;id &lt; 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;user&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>对于生产环境，我们肯定是无法立刻重启替换jar包的，对于这类问题，我们完全可以使用<code>arthas</code>实现在线热更新。</p> <p>首先第一步，我们将生产环境的字节码反编译并导出到本地，如下所示</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>jad  --source-only com.example.arthasExample.TestController <span class="token operator">&gt;</span>  d://TestController.java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后我们修改一下对应的代码段</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949875.png" alt=""></p> <p>然后我们需要找到这个类对应类加载器的hash码</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> *TestController <span class="token operator">|</span> <span class="token function">grep</span> classLoaderHash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://qiniuyun.sharkchili.com/202512010949960.png" alt=""></p> <p>找到对应<code>hash</code>码之后，我们就可以基于这个类加载器将修改后的Java文件编译成字节码文件:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">mc</span> <span class="token parameter variable">-c</span> 18b4aac2 d://TestController.java <span class="token parameter variable">-d</span> d://
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最后我们将代码热更新到正在运行的程序：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redefine d://com/example/arthasExample/TestController.class
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时我们传1作为参数就不会报错了，说明代码热更新成功了。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949028.png" alt=""></p> <h3 id="获取spring上下文进行进一步分析操作"><a href="#获取spring上下文进行进一步分析操作" class="header-anchor">#</a> 获取spring上下文进行进一步分析操作</h3> <p>有时候我们希望在线上获取<code>Spring</code>容器分析定位问题，我们完全可以通过<code>arthas</code>拦截到这个类并进行进一步调用和分析。</p> <p>读过<code>Spring MVC</code>源码的读者可能都知道，每当又<code>HTTP</code>请求发送到web容器时都会进行请求进行映射转发处理时都会经过<code>RequestMappingHandlerAdapter</code>这个适配器上，查看<code>RequestMappingHandlerAdapter</code>的类图，可以看到它继承了<code>WebApplicationObjectSupport</code>，而该类有一个方法<code>getApplicationContext</code>它就可以直接获得Spring上下文，所以接下来笔者就演示如何通过tt指令获得<code>RequestMappingHandlerAdapter</code>从而调用<code>getApplicationContext</code>拿到上下文，开始各种骚操作。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949182.png" alt=""></p> <p>首先我们使用tt指令对<code>RequestMappingHandlerAdapter</code> 进行追逐，如下所示，笔者通过-t知名要追踪的类的全路径和方法，后续只要有请求调用该方法，tt指令就会显示追踪的信息：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt <span class="token parameter variable">-t</span> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter invokeHandlerMethod

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后我们随便调用一个接口，得到调用记录：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949201.png" alt=""></p> <p>我们就以索引为<code>1000</code>的调用记录，通过<code>-w</code>指定ognl获取到<code>spring</code>上下文并获取到<code>testController</code>然后完成一个方法调用：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt <span class="token parameter variable">-i</span> <span class="token number">1000</span> <span class="token parameter variable">-w</span> <span class="token string">'target.getApplicationContext().getBean(&quot;testController&quot;).findUserById(3)'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如下图，可以看到，我们成功的完成了调用并得到了返回结果。</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949269.png" alt=""></p> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="arthas统计方法耗时watch指令的原理是什么"><a href="#arthas统计方法耗时watch指令的原理是什么" class="header-anchor">#</a> arthas统计方法耗时watch指令的原理是什么</h3> <p><code>watch</code>指令示例如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">watch</span> com.example.MyService sayHello <span class="token string">&quot;{params, result, throwExp} -&gt; { return 'Exception: ' + throwExp; }&quot;</span> <span class="token parameter variable">-E</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们从指令即可看出他可以获取到类的全路径，对此我们不拿理解，它就是基于这个类的全路径定位到类的全路径，并对该类型通过字节码桩技术对类的方法进行增强，即插入一段代码进行在方法执行前后插入时间，实现耗时统计：</p> <p><img src="https://qiniuyun.sharkchili.com/202512010949545.png" alt=""></p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>自此我们对Arthas的常见操作都已演示完成，更多关于Arthas的使用读者可以参考Arthas官网，希望对你有帮助：</p> <p>https://arthas.aliyun.com/doc/:<a href="https://arthas.aliyun.com/doc/" target="_blank" rel="noopener noreferrer">https://arthas.aliyun.com/doc/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我是 <strong>SharkChili</strong> ，Java 开发者，<strong>Java Guide</strong> 开源项目维护者。欢迎关注我的公众号：<strong>写代码的SharkChili</strong>，也欢迎您了解我的开源项目 mini-redis：<a href="https://github.com/shark-ctrl/mini-redis" target="_blank" rel="noopener noreferrer">https://github.com/shark-ctrl/mini-redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p>Arthas官网:<a href="https://arthas.aliyun.com/doc/" target="_blank" rel="noopener noreferrer">https://arthas.aliyun.com/doc/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Arthas基础(一):<a href="https://blog.csdn.net/wfw123123/article/details/120010941" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/wfw123123/article/details/120010941<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Arthas - Java 线上问题定位处理的终极利器｜ 8月更文挑战: <a href="https://juejin.cn/post/6993130443654725668#heading-24" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6993130443654725668#heading-24<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Arthas排查jvm相关问题的利器: <a href="https://www.qinglite.cn/doc/439664780602670ae" target="_blank" rel="noopener noreferrer">https://www.qinglite.cn/doc/439664780602670ae<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>新的开始 | Arthas GitHub Star 破万后的回顾和展望:<a href="https://juejin.cn/post/6844903783244234765#heading-3" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844903783244234765#heading-3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>阿里巴巴Arthas实践--jad/mc/redefine线上热更新一条龙:<a href="https://mp.weixin.qq.com/s?__biz=MzkxNDI0ODE0NQ==&amp;mid=2247483937&amp;idx=1&amp;sn=177cd8e97428a053c6365d24aee94c4b&amp;source=41#wechat_redirect" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s?__biz=MzkxNDI0ODE0NQ==&amp;mid=2247483937&amp;idx=1&amp;sn=177cd8e97428a053c6365d24aee94c4b&amp;source=41#wechat_redirect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Alibaba Arthas实践--获取到Spring Context，然后为所欲为：<a href="https://mp.weixin.qq.com/s?__biz=MzkxNDI0ODE0NQ==&amp;mid=2247483935&amp;idx=1&amp;sn=af7eabb4b6c39f362acb6eebeb7ed8b0&amp;source=41#wechat_redirect" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s?__biz=MzkxNDI0ODE0NQ==&amp;mid=2247483935&amp;idx=1&amp;sn=af7eabb4b6c39f362acb6eebeb7ed8b0&amp;source=41#wechat_redirect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>深入探究 JVM | 探秘 Metaspace:<a href="https://www.sczyh30.com/posts/Java/jvm-metaspace/" target="_blank" rel="noopener noreferrer">https://www.sczyh30.com/posts/Java/jvm-metaspace/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>JVM运行时内存
:<a href="https://blog.csdn.net/m0_53611007/article/details/120685628" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/m0_53611007/article/details/120685628<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Java诊断神器Arthas:<a href="https://blog.csdn.net/sundehui01/article/details/121921481" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sundehui01/article/details/121921481<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>PS MarkSweep 和Serial Old 的区别:<a href="https://www.jianshu.com/p/624338a8d51b" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/624338a8d51b<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
         <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="1126101170"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sharkchili/vuepress-theme-vdoing/edit/master/docs/01.Java核心技术/50.JVM相关/14.简明的Arthas配置及基础运维教程.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/12/01, 09:58:25</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/78918f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">从零开始理解JVM的JIT编译机制</div></a> <a href="/pages/1ac322/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">基于Arthas Idea的JVM故障排查与指令生成</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/78918f/" class="prev">从零开始理解JVM的JIT编译机制</a></span> <span class="next"><a href="/pages/1ac322/">基于Arthas Idea的JVM故障排查与指令生成</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5b74d3/"><div>
            告别AI无效对话：资深工程师的提示词设计最佳实践
            <!----></div></a> <span class="date">02-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/745def/"><div>
            基于Vibe Coding的Redis分页查询实现
            <!----></div></a> <span class="date">01-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/609690/"><div>
            IDEA配置详解与高效使用指南
            <!----></div></a> <span class="date">01-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/shkctl" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2025-2026
    <span>Evan Xu | <a href="https://github.com/shkctl/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a> | <a href="http://beian.miit.gov.cn/" target="_blank">桂ICP备2024034950号</a> | <img src="/img/beian.png" style="width: 15px; margin-bottom: -3px;" /> <a href="https://beian.mps.gov.cn/#/query/webSearch?code=45142202000030" rel="noreferrer" target="_blank">桂公网安备45142202000030</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <div class="custom-html-window custom-html-window-lb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定200*200px -->
         <script async src="https:pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
         <ins class="adsbygoogle"
             style="display:inline-block;width:200px;height:200px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8486534683"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div></div></div> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
         <ins class="adsbygoogle"
             style="display:inline-block;max-width:160px;max-height:160px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8350803313"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script>
         </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e893bc68.js" defer></script><script src="/assets/js/2.0f2864c1.js" defer></script><script src="/assets/js/37.080c4136.js" defer></script>
  </body>
</html>
