<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于Arthas Idea的JVM故障排查与指令生成 | The Complete Backend Engineer</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-6948347885301434" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="禅与计算机程序设计的艺术">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.fd8a955e.css" as="style"><link rel="preload" href="/assets/js/app.e893bc68.js" as="script"><link rel="preload" href="/assets/js/2.0f2864c1.js" as="script"><link rel="preload" href="/assets/js/38.a96300bf.js" as="script"><link rel="prefetch" href="/assets/js/10.44e0ca78.js"><link rel="prefetch" href="/assets/js/100.0ed371f6.js"><link rel="prefetch" href="/assets/js/101.7f722fd7.js"><link rel="prefetch" href="/assets/js/102.30c89284.js"><link rel="prefetch" href="/assets/js/103.3ed92c68.js"><link rel="prefetch" href="/assets/js/104.90df8f47.js"><link rel="prefetch" href="/assets/js/105.68247c1d.js"><link rel="prefetch" href="/assets/js/106.7c9f10c1.js"><link rel="prefetch" href="/assets/js/107.a515064a.js"><link rel="prefetch" href="/assets/js/108.80b5fa66.js"><link rel="prefetch" href="/assets/js/109.02b1ee2e.js"><link rel="prefetch" href="/assets/js/11.c76d3e56.js"><link rel="prefetch" href="/assets/js/110.1dccb364.js"><link rel="prefetch" href="/assets/js/111.464698db.js"><link rel="prefetch" href="/assets/js/112.857e923f.js"><link rel="prefetch" href="/assets/js/113.68e5c6a3.js"><link rel="prefetch" href="/assets/js/114.f6ffbf1a.js"><link rel="prefetch" href="/assets/js/115.e217114c.js"><link rel="prefetch" href="/assets/js/116.b65b8e0b.js"><link rel="prefetch" href="/assets/js/117.f6f15ef6.js"><link rel="prefetch" href="/assets/js/118.21180219.js"><link rel="prefetch" href="/assets/js/119.0a50382f.js"><link rel="prefetch" href="/assets/js/12.116d6a17.js"><link rel="prefetch" href="/assets/js/120.c76f2e28.js"><link rel="prefetch" href="/assets/js/121.c77bd4d8.js"><link rel="prefetch" href="/assets/js/122.753a4628.js"><link rel="prefetch" href="/assets/js/123.7d9268b9.js"><link rel="prefetch" href="/assets/js/124.23413b75.js"><link rel="prefetch" href="/assets/js/125.8d808d11.js"><link rel="prefetch" href="/assets/js/126.5c328cd4.js"><link rel="prefetch" href="/assets/js/127.be8eb4c7.js"><link rel="prefetch" href="/assets/js/128.14eaf4c6.js"><link rel="prefetch" href="/assets/js/129.037cada8.js"><link rel="prefetch" href="/assets/js/13.86ee0ee4.js"><link rel="prefetch" href="/assets/js/130.3f4b81a3.js"><link rel="prefetch" href="/assets/js/131.0a8a91be.js"><link rel="prefetch" href="/assets/js/132.d5865515.js"><link rel="prefetch" href="/assets/js/133.334e4ec7.js"><link rel="prefetch" href="/assets/js/134.074fbb0c.js"><link rel="prefetch" href="/assets/js/135.4c1d75b4.js"><link rel="prefetch" href="/assets/js/136.3e122b41.js"><link rel="prefetch" href="/assets/js/137.fe10b09a.js"><link rel="prefetch" href="/assets/js/138.54b4b2ef.js"><link rel="prefetch" href="/assets/js/139.3883fff5.js"><link rel="prefetch" href="/assets/js/14.e34688a7.js"><link rel="prefetch" href="/assets/js/140.078eff15.js"><link rel="prefetch" href="/assets/js/141.949d876b.js"><link rel="prefetch" href="/assets/js/142.54e6ed21.js"><link rel="prefetch" href="/assets/js/143.ff73dde5.js"><link rel="prefetch" href="/assets/js/144.cf979a70.js"><link rel="prefetch" href="/assets/js/145.b217db72.js"><link rel="prefetch" href="/assets/js/146.c9872ef2.js"><link rel="prefetch" href="/assets/js/147.32147c50.js"><link rel="prefetch" href="/assets/js/148.411a0638.js"><link rel="prefetch" href="/assets/js/149.ed899419.js"><link rel="prefetch" href="/assets/js/15.03c300fc.js"><link rel="prefetch" href="/assets/js/150.4c278e80.js"><link rel="prefetch" href="/assets/js/151.73bd004f.js"><link rel="prefetch" href="/assets/js/152.5716ffe7.js"><link rel="prefetch" href="/assets/js/153.33575577.js"><link rel="prefetch" href="/assets/js/154.6e0c3807.js"><link rel="prefetch" href="/assets/js/155.79acad7a.js"><link rel="prefetch" href="/assets/js/156.1ca46e9e.js"><link rel="prefetch" href="/assets/js/157.b8e1cb13.js"><link rel="prefetch" href="/assets/js/158.047ce40d.js"><link rel="prefetch" href="/assets/js/159.564cb107.js"><link rel="prefetch" href="/assets/js/16.76d8d610.js"><link rel="prefetch" href="/assets/js/160.0b4be4c9.js"><link rel="prefetch" href="/assets/js/161.2d0b6a29.js"><link rel="prefetch" href="/assets/js/162.7b7cddf9.js"><link rel="prefetch" href="/assets/js/163.9c1d2ab4.js"><link rel="prefetch" href="/assets/js/164.9a7309b6.js"><link rel="prefetch" href="/assets/js/165.11d81960.js"><link rel="prefetch" href="/assets/js/166.266c02dd.js"><link rel="prefetch" href="/assets/js/167.6d4d9953.js"><link rel="prefetch" href="/assets/js/168.aa4ee3b8.js"><link rel="prefetch" href="/assets/js/169.0d3373fb.js"><link rel="prefetch" href="/assets/js/17.453cb3dd.js"><link rel="prefetch" href="/assets/js/170.ce20f019.js"><link rel="prefetch" href="/assets/js/171.b4f20fc0.js"><link rel="prefetch" href="/assets/js/172.75742b66.js"><link rel="prefetch" href="/assets/js/173.8daa037e.js"><link rel="prefetch" href="/assets/js/174.5243dead.js"><link rel="prefetch" href="/assets/js/175.9a313498.js"><link rel="prefetch" href="/assets/js/176.4c2b81b0.js"><link rel="prefetch" href="/assets/js/177.dad18ef5.js"><link rel="prefetch" href="/assets/js/178.f3fa8d3b.js"><link rel="prefetch" href="/assets/js/179.589b3e1b.js"><link rel="prefetch" href="/assets/js/18.4de1c5f4.js"><link rel="prefetch" href="/assets/js/180.ea36098d.js"><link rel="prefetch" href="/assets/js/181.92cdb1c7.js"><link rel="prefetch" href="/assets/js/182.c0b21f1f.js"><link rel="prefetch" href="/assets/js/183.a0eb2e49.js"><link rel="prefetch" href="/assets/js/184.b5aa56e6.js"><link rel="prefetch" href="/assets/js/185.81cb4cac.js"><link rel="prefetch" href="/assets/js/186.53b06c41.js"><link rel="prefetch" href="/assets/js/187.dfae4e44.js"><link rel="prefetch" href="/assets/js/188.b0cb81de.js"><link rel="prefetch" href="/assets/js/189.3678f44d.js"><link rel="prefetch" href="/assets/js/19.3e76d54a.js"><link rel="prefetch" href="/assets/js/190.83946875.js"><link rel="prefetch" href="/assets/js/191.3ff7b14d.js"><link rel="prefetch" href="/assets/js/192.701461bb.js"><link rel="prefetch" href="/assets/js/193.559260cc.js"><link rel="prefetch" href="/assets/js/194.be81abc2.js"><link rel="prefetch" href="/assets/js/195.9b8d270a.js"><link rel="prefetch" href="/assets/js/196.bec3303f.js"><link rel="prefetch" href="/assets/js/197.63dafd74.js"><link rel="prefetch" href="/assets/js/198.605f2efc.js"><link rel="prefetch" href="/assets/js/199.edfd56ac.js"><link rel="prefetch" href="/assets/js/20.6e6b3fc4.js"><link rel="prefetch" href="/assets/js/200.3e48ab94.js"><link rel="prefetch" href="/assets/js/201.233d8a2d.js"><link rel="prefetch" href="/assets/js/202.91a5ef9c.js"><link rel="prefetch" href="/assets/js/203.bc0fabe9.js"><link rel="prefetch" href="/assets/js/204.8bc8880b.js"><link rel="prefetch" href="/assets/js/205.0f5a3300.js"><link rel="prefetch" href="/assets/js/206.b3505d50.js"><link rel="prefetch" href="/assets/js/207.a394ee4c.js"><link rel="prefetch" href="/assets/js/208.837b0596.js"><link rel="prefetch" href="/assets/js/209.e9d3bceb.js"><link rel="prefetch" href="/assets/js/21.69f77bb4.js"><link rel="prefetch" href="/assets/js/210.edb571f9.js"><link rel="prefetch" href="/assets/js/211.fc30ee35.js"><link rel="prefetch" href="/assets/js/212.0c76fd95.js"><link rel="prefetch" href="/assets/js/213.4c91febb.js"><link rel="prefetch" href="/assets/js/214.0a2395e5.js"><link rel="prefetch" href="/assets/js/215.d4637411.js"><link rel="prefetch" href="/assets/js/216.c1454bb1.js"><link rel="prefetch" href="/assets/js/217.0c0e6f55.js"><link rel="prefetch" href="/assets/js/218.1451ab92.js"><link rel="prefetch" href="/assets/js/219.0f96b0c8.js"><link rel="prefetch" href="/assets/js/22.201d31e2.js"><link rel="prefetch" href="/assets/js/220.8f6313e8.js"><link rel="prefetch" href="/assets/js/221.11a00bef.js"><link rel="prefetch" href="/assets/js/222.8649b716.js"><link rel="prefetch" href="/assets/js/223.d8939fd6.js"><link rel="prefetch" href="/assets/js/224.f7a5a821.js"><link rel="prefetch" href="/assets/js/225.0c642b7c.js"><link rel="prefetch" href="/assets/js/226.5860464c.js"><link rel="prefetch" href="/assets/js/227.079d5421.js"><link rel="prefetch" href="/assets/js/228.d433e6e5.js"><link rel="prefetch" href="/assets/js/229.5068c386.js"><link rel="prefetch" href="/assets/js/23.10bf4243.js"><link rel="prefetch" href="/assets/js/230.20571aa5.js"><link rel="prefetch" href="/assets/js/231.a2977032.js"><link rel="prefetch" href="/assets/js/232.2c809bc8.js"><link rel="prefetch" href="/assets/js/233.443b82b0.js"><link rel="prefetch" href="/assets/js/234.800cdff1.js"><link rel="prefetch" href="/assets/js/235.fb8d4938.js"><link rel="prefetch" href="/assets/js/236.36863586.js"><link rel="prefetch" href="/assets/js/237.ad86391f.js"><link rel="prefetch" href="/assets/js/238.be050d3f.js"><link rel="prefetch" href="/assets/js/239.12a16a50.js"><link rel="prefetch" href="/assets/js/24.824afdae.js"><link rel="prefetch" href="/assets/js/25.35475e70.js"><link rel="prefetch" href="/assets/js/26.e02e9bae.js"><link rel="prefetch" href="/assets/js/27.271f5ef4.js"><link rel="prefetch" href="/assets/js/28.a3385896.js"><link rel="prefetch" href="/assets/js/29.b0f185f2.js"><link rel="prefetch" href="/assets/js/3.a5b363ab.js"><link rel="prefetch" href="/assets/js/30.e3ccdef2.js"><link rel="prefetch" href="/assets/js/31.f96d307d.js"><link rel="prefetch" href="/assets/js/32.c0b9fe86.js"><link rel="prefetch" href="/assets/js/33.200a99d3.js"><link rel="prefetch" href="/assets/js/34.2b031524.js"><link rel="prefetch" href="/assets/js/35.9cf4ce52.js"><link rel="prefetch" href="/assets/js/36.1d78bdc4.js"><link rel="prefetch" href="/assets/js/37.080c4136.js"><link rel="prefetch" href="/assets/js/39.fcf7d628.js"><link rel="prefetch" href="/assets/js/4.373178a6.js"><link rel="prefetch" href="/assets/js/40.6eebc32d.js"><link rel="prefetch" href="/assets/js/41.3ad4146c.js"><link rel="prefetch" href="/assets/js/42.c1beb08d.js"><link rel="prefetch" href="/assets/js/43.76cd763e.js"><link rel="prefetch" href="/assets/js/44.6b1fdcd3.js"><link rel="prefetch" href="/assets/js/45.51579c3c.js"><link rel="prefetch" href="/assets/js/46.52741878.js"><link rel="prefetch" href="/assets/js/47.cd93b2de.js"><link rel="prefetch" href="/assets/js/48.773c188b.js"><link rel="prefetch" href="/assets/js/49.44412d53.js"><link rel="prefetch" href="/assets/js/5.6a44f71a.js"><link rel="prefetch" href="/assets/js/50.b4bbbbea.js"><link rel="prefetch" href="/assets/js/51.e8ef0c3a.js"><link rel="prefetch" href="/assets/js/52.4a55bbf5.js"><link rel="prefetch" href="/assets/js/53.c1087a52.js"><link rel="prefetch" href="/assets/js/54.c8e13749.js"><link rel="prefetch" href="/assets/js/55.cc84db26.js"><link rel="prefetch" href="/assets/js/56.f454b553.js"><link rel="prefetch" href="/assets/js/57.918eb2e9.js"><link rel="prefetch" href="/assets/js/58.d1a59570.js"><link rel="prefetch" href="/assets/js/59.044ec60b.js"><link rel="prefetch" href="/assets/js/6.6a62d9f9.js"><link rel="prefetch" href="/assets/js/60.81e16e70.js"><link rel="prefetch" href="/assets/js/61.ed5542f5.js"><link rel="prefetch" href="/assets/js/62.72b114ed.js"><link rel="prefetch" href="/assets/js/63.3e421524.js"><link rel="prefetch" href="/assets/js/64.1e3fb052.js"><link rel="prefetch" href="/assets/js/65.e1ed1c12.js"><link rel="prefetch" href="/assets/js/66.07753887.js"><link rel="prefetch" href="/assets/js/67.36f77f4b.js"><link rel="prefetch" href="/assets/js/68.5ddddae3.js"><link rel="prefetch" href="/assets/js/69.31b6a988.js"><link rel="prefetch" href="/assets/js/7.2f58813b.js"><link rel="prefetch" href="/assets/js/70.a04b238e.js"><link rel="prefetch" href="/assets/js/71.5ccef793.js"><link rel="prefetch" href="/assets/js/72.b1127849.js"><link rel="prefetch" href="/assets/js/73.7749f2a0.js"><link rel="prefetch" href="/assets/js/74.2fe0cec9.js"><link rel="prefetch" href="/assets/js/75.962eca85.js"><link rel="prefetch" href="/assets/js/76.ea97d2ca.js"><link rel="prefetch" href="/assets/js/77.182bb4ac.js"><link rel="prefetch" href="/assets/js/78.b9d2abaa.js"><link rel="prefetch" href="/assets/js/79.d6901320.js"><link rel="prefetch" href="/assets/js/8.779d1361.js"><link rel="prefetch" href="/assets/js/80.13663490.js"><link rel="prefetch" href="/assets/js/81.b09db84b.js"><link rel="prefetch" href="/assets/js/82.2bcbd31f.js"><link rel="prefetch" href="/assets/js/83.344d67cf.js"><link rel="prefetch" href="/assets/js/84.45bc9110.js"><link rel="prefetch" href="/assets/js/85.84a31255.js"><link rel="prefetch" href="/assets/js/86.fe802e40.js"><link rel="prefetch" href="/assets/js/87.be2bb441.js"><link rel="prefetch" href="/assets/js/88.3d367f79.js"><link rel="prefetch" href="/assets/js/89.87678ad0.js"><link rel="prefetch" href="/assets/js/9.87ad8bb5.js"><link rel="prefetch" href="/assets/js/90.f0b552b5.js"><link rel="prefetch" href="/assets/js/91.ab54ea37.js"><link rel="prefetch" href="/assets/js/92.f5490bfc.js"><link rel="prefetch" href="/assets/js/93.5cbe8d45.js"><link rel="prefetch" href="/assets/js/94.681b3734.js"><link rel="prefetch" href="/assets/js/95.f3017fa5.js"><link rel="prefetch" href="/assets/js/96.52ebd59a.js"><link rel="prefetch" href="/assets/js/97.e28a6ef9.js"><link rel="prefetch" href="/assets/js/98.84e88e28.js"><link rel="prefetch" href="/assets/js/99.9f1258fc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fd8a955e.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="The Complete Backend Engineer" class="logo"> <span class="site-name can-hide">The Complete Backend Engineer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java核心技术" class="dropdown-title"><a href="/java-core/" class="link-title">Java核心技术</a> <span class="title" style="display:none;">Java核心技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Java并发编程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/pages/7e6285/" class="nav-link">浅谈Java并发安全发布技术</a></li><li class="dropdown-subitem"><a href="/pages/bb708f/" class="nav-link">浅谈Java线程池中拒绝策略与流控的艺术</a></li><li class="dropdown-subitem"><a href="/pages/ea4da6/" class="nav-link">深入源码解析synchronized关键字</a></li><li class="dropdown-subitem"><a href="/pages/a62174/" class="nav-link">浅谈Java并发编程中断的哲学</a></li><li class="dropdown-subitem"><a href="/pages/54f168/" class="nav-link">深入理解Java中的final关键字</a></li><li class="dropdown-subitem"><a href="/pages/d9feaf/" class="nav-link">深入剖析Java并发编程中的死锁问题</a></li><li class="dropdown-subitem"><a href="/pages/e171b0/" class="nav-link">浅谈池化技术的优雅关闭</a></li><li class="dropdown-subitem"><a href="/pages/96493d/" class="nav-link">synchronized关键字使用指南</a></li><li class="dropdown-subitem"><a href="/pages/17210f/" class="nav-link">浅谈并发编程等待通知模型</a></li><li class="dropdown-subitem"><a href="/pages/d2df46/" class="nav-link">浅谈传统并发编程的优化思路</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/78918f/" class="nav-link">从零开始理解JVM的JIT编译机制</a></li><li class="dropdown-subitem"><a href="/pages/8e1e94/" class="nav-link">简明的Arthas配置及基础运维教程</a></li><li class="dropdown-subitem"><a href="/pages/1ac322/" aria-current="page" class="nav-link router-link-exact-active router-link-active">基于Arthas Idea的JVM故障排查与指令生成</a></li><li class="dropdown-subitem"><a href="/pages/fca4af/" class="nav-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li class="dropdown-subitem"><a href="/pages/78439b/" class="nav-link">深入剖析arthas技术原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/cs/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机组成原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aa591a/" class="nav-link">浅谈CPU流水线的艺术</a></li></ul></li><li class="dropdown-item"><h4>操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a32bff/" class="nav-link">Linux性能问题排查最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/8902d5/" class="nav-link">Linux上IO性能问题的故障排除实践</a></li><li class="dropdown-subitem"><a href="/pages/09184d/" class="nav-link">浅谈Linux权限管理</a></li><li class="dropdown-subitem"><a href="/pages/29f9e1/" class="nav-link">从操作系统底层浅谈程序栈的高效性</a></li></ul></li><li class="dropdown-item"><h4>编码最佳实践</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/968465/" class="nav-link">浅谈现代软件工程TDD最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/2b73d8/" class="nav-link">浅谈TDD模式下并发程序设计与实现</a></li><li class="dropdown-subitem"><a href="/pages/50d82f/" class="nav-link">面向AI编程新范式Trae后端开发环境搭建与实践</a></li><li class="dropdown-subitem"><a href="/pages/3d2b25/" class="nav-link">基于提示词工程的Redis签到功能开发实践</a></li><li class="dropdown-subitem"><a href="/pages/745def/" class="nav-link">基于Vibe Coding的Redis分页查询实现</a></li><li class="dropdown-subitem"><a href="/pages/5b74d3/" class="nav-link">告别AI无效对话：资深工程师的提示词设计最佳实践</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员日常" class="dropdown-title"><a href="/coder-life/" class="link-title">程序员日常</a> <span class="title" style="display:none;">程序员日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实用技巧与配置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9dae72/" class="nav-link">Mac常用快捷键与效率插件指南</a></li></ul></li><li class="dropdown-item"><h4>写作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/38a0f7/" class="nav-link">写好技术博客的5大核心原则：从认知科学到AI工具的全流程指南</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程工具" class="dropdown-title"><a href="/technology/" class="link-title">编程工具</a> <span class="title" style="display:none;">编程工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/609690/" class="nav-link">IDEA配置详解与高效使用指南</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sharkchili/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jsd.cdn.zzko.cn/gh/sharkchili/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>sharkchili</h3> <span>计算机禅修者</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java核心技术" class="dropdown-title"><a href="/java-core/" class="link-title">Java核心技术</a> <span class="title" style="display:none;">Java核心技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Java并发编程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/pages/7e6285/" class="nav-link">浅谈Java并发安全发布技术</a></li><li class="dropdown-subitem"><a href="/pages/bb708f/" class="nav-link">浅谈Java线程池中拒绝策略与流控的艺术</a></li><li class="dropdown-subitem"><a href="/pages/ea4da6/" class="nav-link">深入源码解析synchronized关键字</a></li><li class="dropdown-subitem"><a href="/pages/a62174/" class="nav-link">浅谈Java并发编程中断的哲学</a></li><li class="dropdown-subitem"><a href="/pages/54f168/" class="nav-link">深入理解Java中的final关键字</a></li><li class="dropdown-subitem"><a href="/pages/d9feaf/" class="nav-link">深入剖析Java并发编程中的死锁问题</a></li><li class="dropdown-subitem"><a href="/pages/e171b0/" class="nav-link">浅谈池化技术的优雅关闭</a></li><li class="dropdown-subitem"><a href="/pages/96493d/" class="nav-link">synchronized关键字使用指南</a></li><li class="dropdown-subitem"><a href="/pages/17210f/" class="nav-link">浅谈并发编程等待通知模型</a></li><li class="dropdown-subitem"><a href="/pages/d2df46/" class="nav-link">浅谈传统并发编程的优化思路</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/78918f/" class="nav-link">从零开始理解JVM的JIT编译机制</a></li><li class="dropdown-subitem"><a href="/pages/8e1e94/" class="nav-link">简明的Arthas配置及基础运维教程</a></li><li class="dropdown-subitem"><a href="/pages/1ac322/" aria-current="page" class="nav-link router-link-exact-active router-link-active">基于Arthas Idea的JVM故障排查与指令生成</a></li><li class="dropdown-subitem"><a href="/pages/fca4af/" class="nav-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li class="dropdown-subitem"><a href="/pages/78439b/" class="nav-link">深入剖析arthas技术原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/cs/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机组成原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/aa591a/" class="nav-link">浅谈CPU流水线的艺术</a></li></ul></li><li class="dropdown-item"><h4>操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a32bff/" class="nav-link">Linux性能问题排查最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/8902d5/" class="nav-link">Linux上IO性能问题的故障排除实践</a></li><li class="dropdown-subitem"><a href="/pages/09184d/" class="nav-link">浅谈Linux权限管理</a></li><li class="dropdown-subitem"><a href="/pages/29f9e1/" class="nav-link">从操作系统底层浅谈程序栈的高效性</a></li></ul></li><li class="dropdown-item"><h4>编码最佳实践</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/968465/" class="nav-link">浅谈现代软件工程TDD最佳实践</a></li><li class="dropdown-subitem"><a href="/pages/2b73d8/" class="nav-link">浅谈TDD模式下并发程序设计与实现</a></li><li class="dropdown-subitem"><a href="/pages/50d82f/" class="nav-link">面向AI编程新范式Trae后端开发环境搭建与实践</a></li><li class="dropdown-subitem"><a href="/pages/3d2b25/" class="nav-link">基于提示词工程的Redis签到功能开发实践</a></li><li class="dropdown-subitem"><a href="/pages/745def/" class="nav-link">基于Vibe Coding的Redis分页查询实现</a></li><li class="dropdown-subitem"><a href="/pages/5b74d3/" class="nav-link">告别AI无效对话：资深工程师的提示词设计最佳实践</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="程序员日常" class="dropdown-title"><a href="/coder-life/" class="link-title">程序员日常</a> <span class="title" style="display:none;">程序员日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>实用技巧与配置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9dae72/" class="nav-link">Mac常用快捷键与效率插件指南</a></li></ul></li><li class="dropdown-item"><h4>写作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/38a0f7/" class="nav-link">写好技术博客的5大核心原则：从认知科学到AI工具的全流程指南</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程工具" class="dropdown-title"><a href="/technology/" class="link-title">编程工具</a> <span class="title" style="display:none;">编程工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/609690/" class="nav-link">IDEA配置详解与高效使用指南</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sharkchili/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sidebar-slot sidebar-slot-top"><!--  固定100% * 150px可显示，max-height:150px 未见显示-->
       <ins class="adsbygoogle"
             style="display:inline-block;width:100%;max-height:150px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8819267679"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script>

</div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JVM相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/78918f/" class="sidebar-link">从零开始理解JVM的JIT编译机制</a></li><li><a href="/pages/8e1e94/" class="sidebar-link">简明的Arthas配置及基础运维教程</a></li><li><a href="/pages/1ac322/" aria-current="page" class="active sidebar-link">基于Arthas Idea的JVM故障排查与指令生成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#写在文章开头" class="sidebar-link">写在文章开头</a></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#详解arthas-idea常见运维监控" class="sidebar-link">详解arthas idea常见运维监控</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#查看类加载信息" class="sidebar-link">查看类加载信息</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#查看静态变量实时动态变化" class="sidebar-link">查看静态变量实时动态变化</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#vmtool字段监控成员变量" class="sidebar-link">vmtool字段监控成员变量</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#方法执行情况监控" class="sidebar-link">方法执行情况监控</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#运行耗时" class="sidebar-link">运行耗时</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#监控方法出入参" class="sidebar-link">监控方法出入参</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#定位方法调用路径" class="sidebar-link">定位方法调用路径</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#获取方法具体出入参" class="sidebar-link">获取方法具体出入参</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#详解arthas-idea快速快速定位线上故障" class="sidebar-link">详解arthas idea快速快速定位线上故障</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#线程cpu使用率与线程定位" class="sidebar-link">线程CPU使用率与线程定位</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#快速定位程序内存飙升" class="sidebar-link">快速定位程序内存飙升</a></li><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#线上替换故障代码段" class="sidebar-link">线上替换故障代码段</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#arthas-idea进阶操作" class="sidebar-link">arthas idea进阶操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1ac322/#基于arthas-idea快速操纵spring容器上下文" class="sidebar-link">基于arthas idea快速操纵spring容器上下文</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header level2"><a href="/pages/1ac322/#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/pages/fca4af/" class="sidebar-link">基于arthas量化监控诊断java应用方法论与实践</a></li><li><a href="/pages/78439b/" class="sidebar-link">深入剖析arthas技术原理</a></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
         <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8723616095"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF" title="分类" data-v-06225672>Java核心技术</a></li><li data-v-06225672><a href="/categories/?category=JVM%E7%9B%B8%E5%85%B3" title="分类" data-v-06225672>JVM相关</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/shkctl" target="_blank" title="作者" class="beLink" data-v-06225672>sharkchili</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-12-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">基于Arthas Idea的JVM故障排查与指令生成<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
        <ins class="adsbygoogle"
             style="display:inline-block;width:100%;max-height:90px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8542375009"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div> <div class="theme-vdoing-content content__default"><h2 id="写在文章开头"><a href="#写在文章开头" class="header-anchor">#</a> 写在文章开头</h2> <p>之前几篇文章笔者介绍<code>arthas</code>基础运维使用和线上问题技巧的使用，很多读者可能会感觉<code>arthas</code>指令记忆成本很高，好在市面上提供了一个不错的插件<code>arthas idea</code>，通过该插件我们即可快速基于现有项目代码段，生成线上排查指令。而本文也将从几个比较经典且常见的场景演示一下如何基于arthas idea快死生成排查指令快速完成java应用程序诊断。</p> <p>因为这篇文章是完全基于arthas idea生成指令解决特定问题，所以，无论你是否先前是否具备arthas使用经验，都可以通过本文的学习，掌握arthas这款的工具的日常使用。</p> <p>我是 <strong>SharkChili</strong> ，Java 开发者，<strong>Java Guide</strong> 开源项目维护者。欢迎关注我的公众号：<strong>写代码的SharkChili</strong>，也欢迎您了解我的开源项目 mini-redis：<a href="https://github.com/shark-ctrl/mini-redis" target="_blank" rel="noopener noreferrer">https://github.com/shark-ctrl/mini-redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>为方便与读者交流，现已创建读者群。关注下方公众号获取我的联系方式，添加时备注<strong>加群</strong>即可加入。</p> <h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h2> <p>，在正式演示<code>arthas idea</code>前，读者务必到<code>idea</code>插件市场搜索并安装一下arthas命令生成插件<code>arthas-idea</code>：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037518.png" alt=""></p> <p>同时，arthas idea也内置的下载arthas的快捷生成指令选项，我们只需右键选择install as.sh即可生成下载和启动指令：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037664.png" alt=""></p> <p>我们将生成的指令粘贴到终端，对应指令如下图，可以看到该指令会通过curl完成下载，然后修改权限并将其启动，此时我们就可以通过进程的名称键入序号进入程序的管理：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037882.png" alt=""></p> <h2 id="详解arthas-idea常见运维监控"><a href="#详解arthas-idea常见运维监控" class="header-anchor">#</a> 详解arthas idea常见运维监控</h2> <h3 id="查看类加载信息"><a href="#查看类加载信息" class="header-anchor">#</a> 查看类加载信息</h3> <p>没有插件之前我们查看某个类加载信息都需要手动编写<code>sc</code>命令，例如我们想查看<code>TestController</code>这个类元信息，有了arthas idea之后我们只需右键找到<code>sc</code>指令并点击：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037059.png" alt=""></p> <p>最终就会生成如下指令，我们可以直接将该指令贴到</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sc <span class="token parameter variable">-d</span> com.example.arthasExample.controller.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时<code>arthas</code>就会加载这个类的信息，通过输出结果就可以直观看到这个类各种元信息、继承关系、以及加载这个类的<code>classLoader</code>的<code>hash</code>码(重点，后续各种操作需要依赖这个类加载器唯一标识)：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037163.png" alt=""></p> <p>需要补充的是，<code>arthas idea</code>给出的sc指令是相对基础的指令，如果我们想查看这个类的字段信息，可以补充一个参数<code>-f(field)</code>，以笔者为例，<code>TestController</code>存在如下字段：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> testVal <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> threadPool <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> lock1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">Object</span> lock2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">UserServiceImpl</span> userService<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>此时我们就可以基于arthas idea生成的指令基础上，添加一个-f指令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>c <span class="token parameter variable">-d</span> <span class="token parameter variable">-f</span>  com.example.arthasExample.controller.TestController
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对应的输出结果如下，结合笔者的代码段可以字段是一一对应可印证的：</p> <ol><li>testVal为静态字段且值为2</li> <li>线程池当前线程数为0，并没有被使用</li> <li>lock1和lock2两个锁变量是object类型</li> <li>list为静态类型且没有添加任何元素：</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512041037272.png" alt=""></p> <h3 id="查看静态变量实时动态变化"><a href="#查看静态变量实时动态变化" class="header-anchor">#</a> 查看静态变量实时动态变化</h3> <p><code>arhtas</code>支持通过上一个示例中笔者提到一个静态的<code>list</code>，它会通过一个接口请求动态添加元素，对应代码如下所示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;val&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>而<code>arhtas</code>是支持通过getstatic指令查看静态变量的实时变化，对应指令格式为<code>getstatic class_name field_name</code>选中字段之后，有了arthas idea之后，我们只需定位到list这个变量，通过右键点击<code>get static field simple</code>即可快速生成表达式：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037500.png" alt=""></p> <p>于是我们就快速得出静态变量查询的指令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>getstatic com.example.arthasExample.controller.TestController list <span class="token parameter variable">-x</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对应输出结果如下，可以看到，在笔者通过接口请求动态元素后，通过arthas idea的指令是可以正确的观测到list的变化：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037674.png" alt=""></p> <p>简单介绍这个指令后，笔者也就官方的说明做个科普，按照官网的说法，实际上对于静态变量的监控更推荐使用<code>ongl</code>表达式，因为该表达式比较复杂，所以在之前的文章中没有过多的展开，而本文是面向arhtas idea展开的，所以针对这个操作就可以更加详细直观的进行演示：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037699.png" alt=""></p> <p>我们还是以<code>list</code>变量演示一下<code>ongl</code>表达式的使用，需要说明的是ongl表达式的参数是需要：</p> <ol><li>执行表达式</li> <li>类加载器hashcode</li> <li>可选参数</li></ol> <p>按照笔者的使用经验，日常的spring boot指令用到的类加载器并非默认，所以我们的实践都是需要手动指定classloader的hash，所以笔者日常使用ongl表达式时的步骤都是：</p> <ol><li>通过sc定位类加载器hash</li> <li>基于类加载器唯一hash通过arthas idea生成ongl表达式</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512041037820.png" alt=""></p> <p>所以本次的示例我们需要先通过arthas的sc获取到当前类的<code>classLoader</code>的哈希码，对应的操作还是针对这个类点击右键选择search classes loaded by jvm sc：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037012.png" alt=""></p> <p>对应的指令和输出结果如下，可以看到<code>classLoaderHash</code>的结果为<code>306a30c7</code>，我们将其记录下文，后续会用到：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037149.png" alt=""></p> <p>然后选中需要监控的字段list右键点击生成ongl表达式：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037352.png" alt=""></p> <p>最后将之前得到的哈希码粘贴并点击copy command，后去list详情的ongl表达式就生成了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037484.png" alt=""></p> <p>最终表达式和结果如下，是不是很方便呢？</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037549.png" alt=""></p> <h3 id="vmtool字段监控成员变量"><a href="#vmtool字段监控成员变量" class="header-anchor">#</a> vmtool字段监控成员变量</h3> <p>arthas自持通过vmtool查询内存对象的信息，以下面这段代码为例，<code>dateTimeStr</code>这个字符串是跟随者接口请求而实时变化的，如果我们希望查看其及时数据就可以通过<code>vmtool</code>指令查阅：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">private</span> <span class="token class-name">String</span> dateTimeStr <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/getVal&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dateTimeStr <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对应指令生成步骤也是通过在对应字段即dateTimeStr右键选择vmtool get instance invoke method field：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037717.png" alt=""></p> <p>然后传入上文留存的sc指令拿到的类加载器hash值，点击copy生成指令：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037867.png" alt=""></p> <p>此时，我们就可以直观的看到成员变量的实时变化了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037958.png" alt=""></p> <h3 id="方法执行情况监控"><a href="#方法执行情况监控" class="header-anchor">#</a> 方法执行情况监控</h3> <p><code>arhtas</code>支持<code>monitor</code>指令进行方法监控，如下这段接口代码<code>findUserById</code>的示例，该接口设计id非法校验和查询(直接mock数据)，我们希望查询单位时间内这个方法的执行成功、失败、以及平均耗时等情况，也就是<code>monitor</code>监控指令，也可以直接通过插件快速生成：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/findUserById/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;id: {}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> id <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;id &lt; 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//模拟查询返回数据</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>对应指令生成方式是在方法名称处右键点击monitor：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037130.png" alt=""></p> <p>对应生成指令如下，可以看到，默认情况下，生成的指令为会执行10次，每10s进行一次输出：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>monitor com.example.arthasExample.controller.TestController findUserById  <span class="token parameter variable">-n</span> <span class="token number">10</span>  <span class="token parameter variable">--cycle</span> <span class="token number">10</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由此我们就可以实时且直观的监控到方法执行的成功、失败、平均耗时等参数信息：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037291.png" alt=""></p> <h3 id="运行耗时"><a href="#运行耗时" class="header-anchor">#</a> 运行耗时</h3> <p>之前的文章，我们介绍了trace命令，这个是定位接口耗时情况的有效武器，我们还是以下面这段代码为例,该接口要求传入用户id然后返回用户信息：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">queryUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">queryUser</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>考虑到完整性我们给出queryUser的逻辑，其步骤比较简单：</p> <ol><li>进行<code>id</code>校验，查看id是否是有效值。</li> <li>调用其他service。</li> <li>到<code>redis</code>缓存中查看是否有该用户信息。</li> <li>若步骤3没有结果，则调用MySQL查询。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">queryUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//入参校验</span>
        <span class="token function">check</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用其他service</span>
        <span class="token function">invokeOtherservice</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//redis查询</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token function">redis</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObject <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> jsonObject<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//返回MySQL查询结果</span>
        <span class="token keyword">return</span> <span class="token function">mysql</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果我们想定位这个接口的耗时情况，可以直接在service的query方法处右键点击插件找到trace选项生成对应trace指令：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037523.png" alt=""></p> <p>此时我们就会得到下面这样一条指令，他给出了我们要追踪的类的全路径以及方法名，默认情况下n为5，即执行5次，然后skipJDKMethod为false即不跳过jdk方法的执行追踪：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>trace com.example.arthasExample.service.UserServiceImpl queryUser  <span class="token parameter variable">-n</span> <span class="token number">5</span> <span class="token parameter variable">--skipJDKMethod</span> <span class="token boolean">false</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时我们就可以很直观的看到的最耗时的方法，可以看到最好是的位置是mysql即数据库持久化操作，由此我们就可以根据这个信息去针对性调优：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037650.png" alt=""></p> <h3 id="监控方法出入参"><a href="#监控方法出入参" class="header-anchor">#</a> 监控方法出入参</h3> <p>我们以上述接口的MySQL方法为例，我们希望通过watch查看出入参详情，对应方法内容如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">mysql</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;查询MySQL数据......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject<span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject<span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> jsonObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>生成指令的步骤还是一样的，对准方法然后右键通过插件快捷生成指令：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037795.png" alt=""></p> <p>默认情况下指令的会打印出入参和异常，然后执行次数为5，输出的结果属性的遍历深度为3，对应的指令和执行结果如下：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037891.png" alt=""></p> <h3 id="定位方法调用路径"><a href="#定位方法调用路径" class="header-anchor">#</a> 定位方法调用路径</h3> <p>我们日常用stack追踪方法调用堆栈，我们还是以mysql方法为例，通过插件快速生成：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037039.png" alt=""></p> <p>生成的指令默认情况下会给出我们选中的类的全路径和方法名，默认执行5次：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>stack com.example.arthasExample.service.UserServiceImpl mysql  <span class="token parameter variable">-n</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样我们就可以快速的得到当前调用的堆栈信息，也就mysql方法调用的来时路：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037200.png" alt=""></p> <h3 id="获取方法具体出入参"><a href="#获取方法具体出入参" class="header-anchor">#</a> 获取方法具体出入参</h3> <blockquote><p>watch 虽然很方便和灵活，但需要提前想清楚观察表达式的拼写，这对排查问题而言要求太高，因为很多时候我们并不清楚问题出自于何方，只能靠蛛丝马迹进行猜测。
这个时候如果能记录下当时方法调用的所有入参和返回值、抛出的异常会对整个问题的思考与判断非常有帮助。
于是乎，TimeTunnel 命令就诞生了。</p></blockquote> <p>下面我们就用<code>check</code>方法为例，来演示一下uid小于0时出入参和错误信息我们如何定位的：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> uid<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uid <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> uid <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;非法用户id，uid:{}&quot;</span><span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;非法用户id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>首先通过插件点击tt指令</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037364.png" alt=""></p> <p>然后点击第一行复制这个指令，可以看到这个指令会指明我们要监控的类和方法，默认情况下执行5次：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037476.png" alt=""></p> <p>查看监控结果可以看到，第3次执行报错：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037607.png" alt=""></p> <p>查看索引为1003，所以我们键入<code>tt -i 1003</code>,此时我们就可以直观的看到入参和错误详情执行堆栈：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037730.png" alt=""></p> <p>注意:tt 相关功能在使用完之后，需要手动释放内存，否则长时间可能导致<code>OOM</code>。退出 <code>arthas</code> 不会自动清除 tt 的缓存 <code>map</code>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt --delete-all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="详解arthas-idea快速快速定位线上故障"><a href="#详解arthas-idea快速快速定位线上故障" class="header-anchor">#</a> 详解arthas idea快速快速定位线上故障</h2> <h3 id="线程cpu使用率与线程定位"><a href="#线程cpu使用率与线程定位" class="header-anchor">#</a> 线程CPU使用率与线程定位</h3> <p>第一个场景就是功能编写不当导致线程CPU使用率飙升，笔者使用如下接口模拟这种情况并发起http请求：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;cpu-100&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//无限循环输出打印</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cpu working&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;thread-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>随着请求结束后，系统逐渐卡顿，CPU使用率飙升，明确定位到当前<code>Java</code>进程后，我们就可以通过<code>arthas</code>的<code>thread</code>指令定位问题线程执行堆栈。以笔者为例，为了更加简单快速的看到问题线程，笔者直接通过<code>thread -n 3</code>打印出最忙碌的前3个线程。
此时，我们就可以看到<code>TestController</code>第36行的代码段CPU使用率非常高：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037916.png" alt=""></p> <p>此时我们就可以通过反编译的方式进行36行实际的代码，在没有<code>arhtas idea</code>插件之前，我们jad指令都需要手动进行输入，有了idea插件之后，只需找到对应的java文件右键找到<code>arthas command</code>点击<code>jad</code>反编译即可生成指令</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037103.png" alt=""></p> <p>以笔者为例，本次通过快捷插件生成的指令为：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>jad --source-only com.example.arthasExample.controller.TestController 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我们将生成的指令贴到<code>arthas</code>并执行，由此我们就可以精准定位到线上执行的java程序的问题代码段：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037213.png" alt=""></p> <h3 id="快速定位程序内存飙升"><a href="#快速定位程序内存飙升" class="header-anchor">#</a> 快速定位程序内存飙升</h3> <p><code>arthas</code>可以说是定位这类疑难杂症的神奇，笔者将应用程序堆内存设置为<code>128m</code>启动：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">java</span>  <span class="token parameter variable">-Xms128m</span> <span class="token parameter variable">-Xmx128m</span> <span class="token parameter variable">-jar</span> arthasExample.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后不断调用这个接口让每个线程threadlocal map填充4m的数组，让应用程序内存飙升：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/oom&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">oom</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        poolExecutor<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            localVariable<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 为线程添加变量</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>随着时间推移，系统内存使用率飙升，明确定位到当前程序之后，先用<code>memory</code>指令观察一下程序当前的内存使用情况，可以看到堆内存使用率远超过业界设定的阈值即70%：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037335.png" alt=""></p> <p>然后我们不断的请求该接口，随着时间推移，从dashboard中也直观看到这个，老年代在疯狂的gc平均一次gc耗时大约32ms，且单位时间内gc次数非常频繁：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037441.png" alt=""></p> <p>此时我们就可以借助插件快速生成<code>heapdump</code>指令，导出该应用的内存快照：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037656.png" alt=""></p> <p>从指令上看，默认情况下，内存快照会被dump到tmp目录下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>heapdump /tmp/dump.hprof
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后我们就可以通过<code>MAT</code>定位到出现问题的线程，点击<code>with in incoming refrences</code>查看这些对象被作为哪个对象的内部引用：</p> <p>这里也补充说明一下Incomming Reference和Outgoing Reference 的区别：</p> <blockquote><p>Incomming Reference 指的是引用当前对象的对象，Outgoing Reference 指的是当前对象引用的对象。对象的incomming reference 保证对象处于 alive 从而免于被垃圾回收掉 ；Outgoing reference 则展示了对象内部的具体内容，有助于我们分析对象的属性 。</p></blockquote> <p><img src="https://qiniuyun.sharkchili.com/202512041037860.png" alt=""></p> <p>可以看到所有的byte数组都指向一个pool-3-thread开头的线程池，此时我们就可以基于本地开发代码定位对应的线程池了：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037105.png" alt=""></p> <h3 id="线上替换故障代码段"><a href="#线上替换故障代码段" class="header-anchor">#</a> 线上替换故障代码段</h3> <p>日常紧急需求上线难免会有些问题，这时候就需要保证服务不停机的情况下完成热点代码替换，可能大部分团队都会通过<code>hotfix</code>分支补丁结合灰度发布的方式完成紧急上线，实际上<code>arthas</code>是直接反编译修改代码完成热点替换的。</p> <p>在正式介绍热点代码替换前，笔者还是需要有几个特殊说明：</p> <ol><li>热点代码替换只支持已经加载的类，对于没有完成加载的类无法通过arthas完成替换</li> <li>完成替换后如果使用watch、trace等指令这个替换就会失效</li> <li>非必要不要在生产环境使用，存在风险</li></ol> <p>这里笔者就以下面这个接口为例，演示一下如何通过通过arthas 将id校验逻辑修改为小于0校验：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/findUserById/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;id: {}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> id <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;id &lt; 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>arthas</code>热更新代码的步骤比较固定，大体分为三步：</p> <ol><li>jad反编译</li> <li>mc编译生成字节码</li> <li>redefine完成热点代码更新</li></ol> <p>有了arthas idea之后，这一切都无需我们操心，因为arthas idea内置了一个快捷指令，我们只需指明项目名称，并将修改的代码加以编译，即可通过快捷插件生成对应替换指令即可完成热点替换。</p> <p>以上接口对应项目为例，笔者通过jps得知项目名称为<code>com.example.arthasExample.ArthasExampleApplication</code>，于是就在如下配置处选择手动配置项目名称：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037247.png" alt=""></p> <p>完成功能代码修改后，点击编译生成最新字节码：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037468.png" alt=""></p> <p>针对该代码右键点击选择refine，此时arthas idea就会针对这段代码生成一段指令完成：</p> <ol><li>下载arhtas</li> <li>select进入我们配置的项目</li> <li>将修改后的代码通过refine完成热更新</li></ol> <p><img src="https://qiniuyun.sharkchili.com/202512041037655.png" alt=""></p> <p>我们直接通过终端运行指令，可以看到arthas本质就是将修改后的字节码转为base64作为参数传入一个HotSwap脚本并执行完成热点代码更新：
<img src="https://qiniuyun.sharkchili.com/202512041037031.png" alt=""></p> <p>这里笔者也给出生成的arthas-idea-plugin-hot-swap.sh的核心代码段，可以看到其本质就是select进程后，将我们修改后的base64字节码替换到运行进程的字节码完成动态加载更新：
<img src="https://qiniuyun.sharkchili.com/202512041037157.png" alt=""></p> <p>此时我们执行curl就可以看到id为1的查询是正常的：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>➜  github <span class="token function">curl</span> http://localhost:8848/findUserById/1
<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;user1&quot;</span>,<span class="token string">&quot;age&quot;</span>:18<span class="token punctuation">}</span>%
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>同时，基于边界值进行验证，可以发现日志打印输出的是小于0才抛出校验异常：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037279.png" alt=""></p> <p>这里笔者仅仅演示了热更新中的最简单的剪切板替换，因为<a href="https://www.yuque.com/arthas-idea-plugin/help/pwxhb4#1vlwC" target="_blank" rel="noopener noreferrer">https://www.yuque.com/arthas-idea-plugin/help/pwxhb4#1vlwC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="arthas-idea进阶操作"><a href="#arthas-idea进阶操作" class="header-anchor">#</a> arthas idea进阶操作</h2> <h3 id="基于arthas-idea快速操纵spring容器上下文"><a href="#基于arthas-idea快速操纵spring容器上下文" class="header-anchor">#</a> 基于arthas idea快速操纵spring容器上下文</h3> <p>我们都知道spring中有个上下文叫<code>applicationContext</code>，它记录着所有的bean的信息，通过该容器我们可以得到所有的bean进行各种操作。</p> <p>这意味着如果我们在spring项目中如果有什么特殊的执行操作，完全可以通过tt定位到包含上下文的类，然后获取其applicationContext完成特殊操作。</p> <p>举个例子,我们的<code>TestController</code>有一个方法<code>findUserById</code>，我们希望通过tt指令定位到这个<code>bean</code>对应的上下文<code>applicationContext</code>并完成对这个方法的调用：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/user/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JSONObject</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;id: {}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> id <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;id &lt; 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putOnce</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>读过Spring MVC源码的读者可能都知道，每当有<code>HTTP</code>请求发送到web容器时请求进行映射转发处理时都会经过<code>RequestMappingHandlerAdapter</code>，从下面的类图不难看出它继承了<code>WebApplicationObjectSupport</code>，而该类有一个方法<code>getWebApplicationContext</code>可以让我们获取到<code>spring</code>容器的上下文，进而去分析管理spring容器：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041037450.png" alt=""></p> <p>所以我们通过插件生成<code>RequestMappingHandlerAdapter</code>的tt指令：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041045196.png" alt=""></p> <p>然后等待用户请求后，定位到这个类的执行记录，如下图对应1001索引就是笔者的请求：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041038161.png" alt=""></p> <p>基于这个索引对应的target，其实就是我们的<code>RequestMappingHandlerAdapter</code>，我们通过-w 像写java代码一样获取到<code>applicationContext</code>从而得到<code>testController</code>最终完成调用：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tt <span class="token parameter variable">-i</span> <span class="token number">1000</span> <span class="token parameter variable">-w</span> <span class="token string">'target.getApplicationContext().getBean(&quot;testController&quot;).findUserById(3)'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>最终我们如愿完成了调用：</p> <p><img src="https://qiniuyun.sharkchili.com/202512041038301.png" alt=""></p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>本文笔者直接通过IDEA插件快速生成Arthas指令快速完成日常JVM运维和故障定位工作，可以看到有了插件的配合我们只需大概记住指令的作用即可，每当我们需要使用的时候，只需要结合插件生成一下指令进行相应简单调整即可快速得到想要的指令。</p> <p>自此本文讲解结束，希望对你有帮助。</p> <p>我是 <strong>SharkChili</strong> ，Java 开发者，<strong>Java Guide</strong> 开源项目维护者。欢迎关注我的公众号：<strong>写代码的SharkChili</strong>，也欢迎您了解我的开源项目 mini-redis：<a href="https://github.com/shark-ctrl/mini-redis" target="_blank" rel="noopener noreferrer">https://github.com/shark-ctrl/mini-redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>为方便与读者交流，现已创建读者群。关注下方公众号获取我的联系方式，添加时备注<strong>加群</strong>即可加入。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p>arthas 执行ognl表达式ClassNotFoundException:<a href="https://blog.csdn.net/w605283073/article/details/106535170" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/w605283073/article/details/106535170<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>arthas idea使用手册:<a href="https://www.yuque.com/arthas-idea-plugin" target="_blank" rel="noopener noreferrer">https://www.yuque.com/arthas-idea-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>jvm参数配置:<a href="https://blog.csdn.net/wang379275614/article/details/78471604" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/wang379275614/article/details/78471604<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Java诊断神器Arthas：<a href="https://blog.csdn.net/sundehui01/article/details/121921481" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sundehui01/article/details/121921481<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Java内存分析工具MAT(Memory Analyzer Tool)的介绍与使用:<a href="https://juejin.cn/post/7030664794843660302#heading-6" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7030664794843660302#heading-6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
         <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="1126101170"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sharkchili/vuepress-theme-vdoing/edit/master/docs/01.Java核心技术/50.JVM相关/15.基于Arthas Idea的JVM故障排查与指令生成.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/12/04, 11:04:28</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8e1e94/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">简明的Arthas配置及基础运维教程</div></a> <a href="/pages/fca4af/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">基于arthas量化监控诊断java应用方法论与实践</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8e1e94/" class="prev">简明的Arthas配置及基础运维教程</a></span> <span class="next"><a href="/pages/fca4af/">基于arthas量化监控诊断java应用方法论与实践</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5b74d3/"><div>
            告别AI无效对话：资深工程师的提示词设计最佳实践
            <!----></div></a> <span class="date">02-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/745def/"><div>
            基于Vibe Coding的Redis分页查询实现
            <!----></div></a> <span class="date">01-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/609690/"><div>
            IDEA配置详解与高效使用指南
            <!----></div></a> <span class="date">01-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/shkctl" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2025-2026
    <span>Evan Xu | <a href="https://github.com/shkctl/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a> | <a href="http://beian.miit.gov.cn/" target="_blank">桂ICP备2024034950号</a> | <img src="/img/beian.png" style="width: 15px; margin-bottom: -3px;" /> <a href="https://beian.mps.gov.cn/#/query/webSearch?code=45142202000030" rel="noreferrer" target="_blank">桂公网安备45142202000030</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <div class="custom-html-window custom-html-window-lb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定200*200px -->
         <script async src="https:pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
         <ins class="adsbygoogle"
             style="display:inline-block;width:200px;height:200px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8486534683"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script></div></div></div> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
         <ins class="adsbygoogle"
             style="display:inline-block;max-width:160px;max-height:160px"
             data-ad-client="ca-pub-6948347885301434"
             data-ad-slot="8350803313"></ins>
         <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
         </script>
         </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e893bc68.js" defer></script><script src="/assets/js/2.0f2864c1.js" defer></script><script src="/assets/js/38.a96300bf.js" defer></script>
  </body>
</html>
